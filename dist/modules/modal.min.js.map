{"version":3,"sources":["modal/modal.js"],"names":[],"mappings":"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","file":"modal.min.js","sourcesContent":["'use strict';\n\nangular.module('mgcrea.ngStrap.modal', ['mgcrea.ngStrap.helpers.dimensions'])\n\n  .provider('$modal', function() {\n\n    var defaults = this.defaults = {\n      animation: 'am-fade',\n      backdropAnimation: 'am-fade',\n      prefixClass: 'modal',\n      prefixEvent: 'modal',\n      placement: 'top',\n      template: 'modal/modal.tpl.html',\n      contentTemplate: false,\n      container: false,\n      element: null,\n      backdrop: true,\n      keyboard: true,\n      html: false,\n      show: true\n    };\n\n    this.$get = function($window, $rootScope, $compile, $q, $templateCache, $http, $animate, $timeout, $sce, dimensions) {\n\n      var forEach = angular.forEach;\n      var trim = String.prototype.trim;\n      var requestAnimationFrame = $window.requestAnimationFrame || $window.setTimeout;\n      var bodyElement = angular.element($window.document.body);\n      var htmlReplaceRegExp = /ng-bind=\"/ig;\n\n      function ModalFactory(config) {\n\n        var $modal = {};\n\n        // Common vars\n        var options = $modal.$options = angular.extend({}, defaults, config);\n        $modal.$promise = fetchTemplate(options.template);\n        var scope = $modal.$scope = options.scope && options.scope.$new() || $rootScope.$new();\n        if(!options.element && !options.container) {\n          options.container = 'body';\n        }\n\n        // store $id to identify the triggering element in events\n        // give priority to options.id, otherwise, try to use\n        // element id if defined\n        $modal.$id = options.id || options.element && options.element.attr('id') || '';\n\n        // Support scope as string options\n        forEach(['title', 'content'], function(key) {\n          if(options[key]) scope[key] = $sce.trustAsHtml(options[key]);\n        });\n\n        // Provide scope helpers\n        scope.$hide = function() {\n          scope.$$postDigest(function() {\n            $modal.hide();\n          });\n        };\n        scope.$show = function() {\n          scope.$$postDigest(function() {\n            $modal.show();\n          });\n        };\n        scope.$toggle = function() {\n          scope.$$postDigest(function() {\n            $modal.toggle();\n          });\n        };\n        // Publish isShown as a protected var on scope\n        $modal.$isShown = scope.$isShown = false;\n\n        // Support contentTemplate option\n        if(options.contentTemplate) {\n          $modal.$promise = $modal.$promise.then(function(template) {\n            var templateEl = angular.element(template);\n            return fetchTemplate(options.contentTemplate)\n            .then(function(contentTemplate) {\n              var contentEl = findElement('[ng-bind=\"content\"]', templateEl[0]).removeAttr('ng-bind').html(contentTemplate);\n              // Drop the default footer as you probably don't want it if you use a custom contentTemplate\n              if(!config.template) contentEl.next().remove();\n              return templateEl[0].outerHTML;\n            });\n          });\n        }\n\n        // Fetch, compile then initialize modal\n        var modalLinker, modalElement;\n        var backdropElement = angular.element('<div class=\"' + options.prefixClass + '-backdrop\"/>');\n        backdropElement.css({position:'fixed', top:'0px', left:'0px', bottom:'0px', right:'0px', 'z-index': 1038});\n        $modal.$promise.then(function(template) {\n          if(angular.isObject(template)) template = template.data;\n          if(options.html) template = template.replace(htmlReplaceRegExp, 'ng-bind-html=\"');\n          template = trim.apply(template);\n          modalLinker = $compile(template);\n          $modal.init();\n        });\n\n        $modal.init = function() {\n\n          // Options: show\n          if(options.show) {\n            scope.$$postDigest(function() {\n              $modal.show();\n            });\n          }\n\n        };\n\n        $modal.destroy = function() {\n\n          // Remove element\n          if(modalElement) {\n            modalElement.remove();\n            modalElement = null;\n          }\n          if(backdropElement) {\n            backdropElement.remove();\n            backdropElement = null;\n          }\n\n          // Destroy scope\n          scope.$destroy();\n\n        };\n\n        $modal.show = function() {\n          if($modal.$isShown) return;\n\n          var parent, after;\n          if(angular.isElement(options.container)) {\n            parent = options.container;\n            after = options.container[0].lastChild ? angular.element(options.container[0].lastChild) : null;\n          } else {\n            if (options.container) {\n              parent = findElement(options.container);\n              after = parent[0].lastChild ? angular.element(parent[0].lastChild) : null;\n            } else {\n              parent = null;\n              after = options.element;\n            }\n          }\n\n          // Fetch a cloned element linked from template\n          modalElement = $modal.$element = modalLinker(scope, function(clonedElement, scope) {});\n\n          if(scope.$emit(options.prefixEvent + '.show.before', $modal).defaultPrevented) {\n            return;\n          }\n\n          // Set the initial positioning.\n          modalElement.css({display: 'block'}).addClass(options.placement);\n\n          // Options: animation\n          if(options.animation) {\n            if(options.backdrop) {\n              backdropElement.addClass(options.backdropAnimation);\n            }\n            modalElement.addClass(options.animation);\n          }\n\n          if(options.backdrop) {\n            $animate.enter(backdropElement, bodyElement, null);\n          }\n          // Support v1.3+ $animate\n          // https://github.com/angular/angular.js/commit/bf0f5502b1bbfddc5cdd2f138efd9188b8c652a9\n          var promise = $animate.enter(modalElement, parent, after, enterAnimateCallback);\n          if(promise && promise.then) promise.then(enterAnimateCallback);\n\n          $modal.$isShown = scope.$isShown = true;\n          safeDigest(scope);\n          // Focus once the enter-animation has started\n          // Weird PhantomJS bug hack\n          var el = modalElement[0];\n          requestAnimationFrame(function() {\n            el.focus();\n          });\n\n          bodyElement.addClass(options.prefixClass + '-open');\n          if(options.animation) {\n            bodyElement.addClass(options.prefixClass + '-with-' + options.animation);\n          }\n\n          // Bind events\n          if(options.backdrop) {\n            modalElement.on('click', hideOnBackdropClick);\n            backdropElement.on('click', hideOnBackdropClick);\n            backdropElement.on('wheel', preventEventDefault);\n          }\n          if(options.keyboard) {\n            modalElement.on('keyup', $modal.$onKeyUp);\n          }\n        };\n\n        function enterAnimateCallback() {\n          scope.$emit(options.prefixEvent + '.show', $modal);\n        }\n\n        $modal.hide = function() {\n          if(!$modal.$isShown) return;\n\n          if(scope.$emit(options.prefixEvent + '.hide.before', $modal).defaultPrevented) {\n            return;\n          }\n          var promise = $animate.leave(modalElement, leaveAnimateCallback);\n          // Support v1.3+ $animate\n          // https://github.com/angular/angular.js/commit/bf0f5502b1bbfddc5cdd2f138efd9188b8c652a9\n          if(promise && promise.then) promise.then(leaveAnimateCallback);\n\n          if(options.backdrop) {\n            $animate.leave(backdropElement);\n          }\n          $modal.$isShown = scope.$isShown = false;\n          safeDigest(scope);\n\n          // Unbind events\n          if(options.backdrop) {\n            modalElement.off('click', hideOnBackdropClick);\n            backdropElement.off('click', hideOnBackdropClick);\n            backdropElement.off('wheel', preventEventDefault);\n          }\n          if(options.keyboard) {\n            modalElement.off('keyup', $modal.$onKeyUp);\n          }\n        };\n\n        function leaveAnimateCallback() {\n          scope.$emit(options.prefixEvent + '.hide', $modal);\n          bodyElement.removeClass(options.prefixClass + '-open');\n          if(options.animation) {\n            bodyElement.removeClass(options.prefixClass + '-with-' + options.animation);\n          }\n        }\n\n        $modal.toggle = function() {\n\n          $modal.$isShown ? $modal.hide() : $modal.show();\n\n        };\n\n        $modal.focus = function() {\n          modalElement[0].focus();\n        };\n\n        // Protected methods\n\n        $modal.$onKeyUp = function(evt) {\n\n          if (evt.which === 27 && $modal.$isShown) {\n            $modal.hide();\n            evt.stopPropagation();\n          }\n\n        };\n\n        // Private methods\n\n        function hideOnBackdropClick(evt) {\n          if(evt.target !== evt.currentTarget) return;\n          options.backdrop === 'static' ? $modal.focus() : $modal.hide();\n        }\n\n        function preventEventDefault(evt) {\n          evt.preventDefault();\n        }\n\n        return $modal;\n\n      }\n\n      // Helper functions\n\n      function safeDigest(scope) {\n        scope.$$phase || (scope.$root && scope.$root.$$phase) || scope.$digest();\n      }\n\n      function findElement(query, element) {\n        return angular.element((element || document).querySelectorAll(query));\n      }\n\n      var fetchPromises = {};\n      function fetchTemplate(template) {\n        if(fetchPromises[template]) return fetchPromises[template];\n        return (fetchPromises[template] = $http.get(template, {cache: $templateCache}).then(function(res) {\n          return res.data;\n        }));\n      }\n\n      return ModalFactory;\n\n    };\n\n  })\n\n  .directive('bsModal', function($window, $sce, $modal) {\n\n    return {\n      restrict: 'EAC',\n      scope: true,\n      link: function postLink(scope, element, attr, transclusion) {\n\n        // Directive options\n        var options = {scope: scope, element: element, show: false};\n        angular.forEach(['template', 'contentTemplate', 'placement', 'container', 'animation', 'id'], function(key) {\n          if(angular.isDefined(attr[key])) options[key] = attr[key];\n        });\n\n        // use string regex match for boolean values\n        var falseValueRegExp = /^(false|0|)$/;\n        angular.forEach(['keyboard', 'html'], function(key) {\n          if(angular.isDefined(attr[key])) options[key] = !falseValueRegExp.test(attr[key]);\n        });\n\n        if(angular.isDefined(attr.backdrop)) {\n          options.backdrop = falseValueRegExp.test(attr.backdrop) ? false : attr.backdrop;\n        }\n\n        // Support scope as data-attrs\n        angular.forEach(['title', 'content'], function(key) {\n          attr[key] && attr.$observe(key, function(newValue, oldValue) {\n            scope[key] = $sce.trustAsHtml(newValue);\n          });\n        });\n\n        // Support scope as an object\n        attr.bsModal && scope.$watch(attr.bsModal, function(newValue, oldValue) {\n          if(angular.isObject(newValue)) {\n            angular.extend(scope, newValue);\n          } else {\n            scope.content = newValue;\n          }\n        }, true);\n\n        // Initialize modal\n        var modal = $modal(options);\n\n        // Trigger\n        element.on(attr.trigger || 'click', modal.toggle);\n\n        // Garbage collection\n        scope.$on('$destroy', function() {\n          if (modal) modal.destroy();\n          options = null;\n          modal = null;\n        });\n\n      }\n    };\n\n  });\n"],"sourceRoot":"/source/"}