/**
 * angular-strap
 * @version v2.0.0-rc.4 - 2014-04-03
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.typeahead",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$typeahead",function(){var a=this.defaults={animation:"am-fade",prefixClass:"typeahead",placement:"bottom-left",template:"typeahead/typeahead.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,minLength:1,filter:"filter",limit:6};this.$get=["$window","$rootScope","$tooltip",function(b,c,d){function e(b,c){var e={},f=angular.extend({},a,c),g=f.controller;e=d(b,f);var h=c.scope,i=e.$scope;i.$matches=[],i.$activeIndex=0,i.$activate=function(a){i.$$postDigest(function(){e.activate(a)})},i.$select=function(a){i.$$postDigest(function(){e.select(a)})},i.$isVisible=function(){return e.$isVisible()},e.update=function(a){i.$matches=a,i.$activeIndex>=a.length&&(i.$activeIndex=0)},e.activate=function(a){i.$activeIndex=a},e.select=function(a){var c=i.$matches[a].value;g&&(g.$setViewValue(c),g.$render(),h&&h.$digest()),"focus"===f.trigger?b[0].blur():e.$isShown&&e.hide(),i.$activeIndex=0,i.$emit("$typeahead.select",c,a)},e.$isVisible=function(){return f.minLength&&g?i.$matches.length&&angular.isString(g.$viewValue)&&g.$viewValue.length>=f.minLength:!!i.$matches.length},e.$getIndex=function(a){var b=i.$matches.length,c=b;if(b){for(c=b;c--&&i.$matches[c].value!==a;);if(!(0>c))return c}},e.$onMouseDown=function(a){a.preventDefault(),a.stopPropagation()},e.$onKeyDown=function(a){if(/(38|40|13)/.test(a.keyCode)){if(a.preventDefault(),a.stopPropagation(),13===a.keyCode)return e.select(i.$activeIndex);38===a.keyCode&&i.$activeIndex>0?i.$activeIndex--:40===a.keyCode&&i.$activeIndex<i.$matches.length-1?i.$activeIndex++:angular.isUndefined(i.$activeIndex)&&(i.$activeIndex=0),i.$digest()}};var j=e.show;e.show=function(){j(),setTimeout(function(){e.$element.on("mousedown",e.$onMouseDown),f.keyboard&&b.on("keydown",e.$onKeyDown)})};var k=e.hide;return e.hide=function(){e.$element.off("mousedown",e.$onMouseDown),f.keyboard&&b.off("keydown",e.$onKeyDown),k()},e}angular.element(b.document.body);return e.defaults=a,e}]}).directive("bsTypeahead",["$window","$parse","$q","$typeahead","$parseOptions",function(a,b,c,d,e){var f=d.defaults;return{restrict:"EAC",require:"ngModel",link:function(a,b,c,g){var h={scope:a,controller:g};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","filter","limit","minLength"],function(a){angular.isDefined(c[a])&&(h[a]=c[a])});var i=h.filter||f.filter,j=h.limit||f.limit,k=c.ngOptions;i&&(k+=" | "+i+":$viewValue"),j&&(k+=" | limitTo:"+j);var l=e(k),m=d(b,h);a.$watch(c.ngModel,function(){l.valuesFn(a,g).then(function(a){a.length>j&&(a=a.slice(0,j)),m.update(a),g.$render()})}),g.$render=function(){if(g.$isEmpty(g.$viewValue))return b.val("");var a=m.$getIndex(g.$modelValue),c=angular.isDefined(a)?m.$scope.$matches[a].label:g.$viewValue;b.val(c.replace(/<(?:.|\n)*?>/gm,"").trim())},a.$on("$destroy",function(){m.destroy(),h=null,m=null})}}}]),angular.module("mgcrea.ngStrap.typeahead").run(["$templateCache",function(a){a.put("typeahead/typeahead.tpl.html",'<ul tabindex="-1" class="typeahead dropdown-menu" ng-show="$isVisible()" role="select"><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $index == $activeIndex}"><a role="menuitem" tabindex="-1" ng-click="$select($index, $event)" ng-bind="match.label"></a></li></ul>')}]);
//# sourceMappingURL=typeahead.min.map