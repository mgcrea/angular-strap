{"version":3,"sources":["modules/alert.js"],"names":["angular","container","provider","element","this","defaults","backdrop","keyboard","show","duration","type","dismissable","focusMeDisabled","$get","$alert","options","$modal","returnFocus","containerEl","$element","AlertFactory","extend","config","findNextFocusableElement","document","findFocusableElements","toArray","focusable","undefined","filter","i","el","index","indexOf","activeElement","$scope","$timeout","hide","scope","directive","restrict","link","isDefined","key","falseValueRegExp","forEach","bsKey","charAt","toUpperCase","slice","attr","test","title","$eval","hasOwnProperty","$watch","isObject","newValue","oldValue","bsAlert","alert","trigger","destroy","on","toggle","$on"],"mappings":"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","file":"alert.min.js","sourcesContent":["'use strict';\r\n\r\n// @BUG: following snippet won't compile correctly\r\n\r\nangular.module('mgcrea.ngStrap.alert', ['mgcrea.ngStrap.modal'])\r\n\r\n  .provider('$alert', function () {\r\n\r\n    var defaults = this.defaults = {\r\n      animation: 'am-fade',\r\n      prefixClass: 'alert',\r\n      prefixEvent: 'alert',\r\n      placement: null,\r\n      templateUrl: 'alert/alert.tpl.html',\r\n      container: false,\r\n      element: null,\r\n      backdrop: false,\r\n      keyboard: true,\r\n      show: true,\r\n      // Specific options\r\n      duration: false,\r\n      type: false,\r\n      dismissable: true,\r\n      focusMeDisabled: false\r\n    };\r\n\r\n    this.$get = function ($modal, $timeout) {\r\n\r\n      function AlertFactory (config) {\r\n\r\n        var $alert = {};\r\n\r\n        // Common vars\r\n        var options = angular.extend({}, defaults, config);\r\n\r\n        $alert = $modal(options);\r\n        $alert.returnFocus = function () {\r\n          function findFocusableElements () {\r\n            var containerEl = angular.element($alert.$element).closest('[ng-controller]');\r\n            return containerEl.find('a:not([disabled]),button:not([disabled]),input:not([disabled]),select:not([disabled]),[tabindex]:not([disabled]):not([tabindex=\"-1\"])').filter(function (i, el) {\r\n              return !angular.element(el).parentsUntil(containerEl, '[tabindex=\"-1\"]').length;\r\n            });\r\n          }\r\n\r\n          function findNextFocusableElement () {\r\n            if (document.activeElement) {\r\n              var focusable = findFocusableElements().toArray();\r\n              if (focusable === undefined) return;\r\n              var index = focusable.indexOf(document.activeElement);\r\n              return focusable[index + 1];\r\n            }\r\n          }\r\n          angular.element(findNextFocusableElement()).trigger('focus');\r\n        };\r\n\r\n        // Support scope as string options [/*title, content, */ type, dismissable]\r\n        $alert.$scope.dismissable = !!options.dismissable;\r\n        if (options.type) {\r\n          $alert.$scope.type = options.type;\r\n        }\r\n        if (options.focusMeDisabled) {\r\n          $alert.$scope.focusMeDisabled = options.focusMeDisabled;\r\n        }\r\n\r\n        // Support auto-close duration\r\n        var show = $alert.show;\r\n        if (options.duration) {\r\n          $alert.show = function () {\r\n            show();\r\n            $timeout(function () {\r\n              $alert.hide();\r\n            }, options.duration * 1000);\r\n          };\r\n        }\r\n\r\n        return $alert;\r\n\r\n      }\r\n\r\n      return AlertFactory;\r\n\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsAlert', function ($window, $sce, $alert) {\r\n\r\n    return {\r\n      restrict: 'EAC',\r\n      scope: true,\r\n      link: function postLink (scope, element, attr, transclusion) {\r\n\r\n        // Directive options\r\n        var options = {scope: scope, element: element, show: false};\r\n        angular.forEach(['template', 'templateUrl', 'controller', 'controllerAs', 'placement', 'keyboard', 'html', 'container', 'animation', 'duration', 'dismissable'], function (key) {\r\n          if (angular.isDefined(attr[key])) options[key] = attr[key];\r\n        });\r\n\r\n        // use string regex match boolean attr falsy values, leave truthy values be\r\n        var falseValueRegExp = /^(false|0|)$/i;\r\n        angular.forEach(['keyboard', 'html', 'container', 'dismissable'], function (key) {\r\n          if (angular.isDefined(attr[key]) && falseValueRegExp.test(attr[key])) options[key] = false;\r\n        });\r\n\r\n        // bind functions from the attrs to the show and hide events\r\n        angular.forEach(['onBeforeShow', 'onShow', 'onBeforeHide', 'onHide'], function (key) {\r\n          var bsKey = 'bs' + key.charAt(0).toUpperCase() + key.slice(1);\r\n          if (angular.isDefined(attr[bsKey])) {\r\n            options[key] = scope.$eval(attr[bsKey]);\r\n          }\r\n        });\r\n\r\n        // overwrite inherited title value when no value specified\r\n        // fix for angular 1.3.1 531a8de72c439d8ddd064874bf364c00cedabb11\r\n        if (!scope.hasOwnProperty('title')) {\r\n          scope.title = '';\r\n        }\r\n\r\n        // Support scope as data-attrs\r\n        angular.forEach(['title', 'content', 'type'], function (key) {\r\n          if (attr[key]) {\r\n            attr.$observe(key, function (newValue, oldValue) {\r\n              scope[key] = $sce.trustAsHtml(newValue);\r\n            });\r\n          }\r\n        });\r\n\r\n        // Support scope as an object\r\n        if (attr.bsAlert) {\r\n          scope.$watch(attr.bsAlert, function (newValue, oldValue) {\r\n            if (angular.isObject(newValue)) {\r\n              angular.extend(scope, newValue);\r\n            } else {\r\n              scope.content = newValue;\r\n            }\r\n          }, true);\r\n        }\r\n\r\n        // Initialize alert\r\n        var alert = $alert(options);\r\n\r\n        // Trigger\r\n        element.on(attr.trigger || 'click', alert.toggle);\r\n\r\n        // Garbage collection\r\n        scope.$on('$destroy', function () {\r\n          if (alert) alert.destroy();\r\n          options = null;\r\n          alert = null;\r\n        });\r\n\r\n      }\r\n    };\r\n\r\n  });\r\n"]}