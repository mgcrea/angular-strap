/**
 * angular-strap
 * @version v2.0.0-rc.4 - 2014-04-02
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.tooltip",["ngAnimate","mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var a=this.defaults={animation:"am-fade",prefixClass:"tooltip",container:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","dimensions","$$animateReflow",function(b,c,d,e,f,g,h,i,j,k){function l(b,e){function f(){return"body"===l.container?j.offset(b[0]):j.position(b[0])}function g(a,b,c,d){var e,f=a.split("-");switch(f[0]){case"right":e={top:b.top+b.height/2-d/2,left:b.left+b.width};break;case"bottom":e={top:b.top+b.height,left:b.left+b.width/2-c/2};break;case"left":e={top:b.top+b.height/2-d/2,left:b.left-c};break;default:e={top:b.top-d,left:b.left+b.width/2-c/2}}if(!f[1])return e;if("top"===f[0]||"bottom"===f[0])switch(f[1]){case"left":e.left=b.left;break;case"right":e.left=b.left+b.width-c}else if("left"===f[0]||"right"===f[0])switch(f[1]){case"top":e.top=b.top-d;break;case"bottom":e.top=b.top+b.height}return e}var i={},l=i.$options=angular.extend({},a,e);i.$promise=n(l.template);var r=i.$scope=l.scope&&l.scope.$new()||c.$new();l.delay&&angular.isString(l.delay)&&(l.delay=parseFloat(l.delay)),l.title&&(i.$scope.title=l.title),r.$hide=function(){r.$$postDigest(function(){i.hide()})},r.$show=function(){r.$$postDigest(function(){i.show()})},r.$toggle=function(){r.$$postDigest(function(){i.toggle()})},i.$isShown=r.$isShown=!1;var s,t;l.contentTemplate&&(i.$promise=i.$promise.then(function(a){var b=angular.element(a);return n(l.contentTemplate).then(function(a){return m('[ng-bind="content"]',b[0]).removeAttr("ng-bind").html(a),b[0].outerHTML})}));var u,v,w,x;return i.$promise.then(function(a){angular.isObject(a)&&(a=a.data),l.html&&(a=a.replace(q,'ng-bind-html="')),a=o.apply(a),w=a,u=d(a),i.init()}),i.init=function(){l.delay&&angular.isNumber(l.delay)&&(l.delay={show:l.delay,hide:l.delay}),"self"===l.container?x=b:l.container&&(x=m(l.container));var a=l.trigger.split(" ");angular.forEach(a,function(a){"click"===a?b.on("click",i.toggle):"manual"!==a&&(b.on("hover"===a?"mouseenter":"focus",i.enter),b.on("hover"===a?"mouseleave":"blur",i.leave),"hover"!==a&&b.on(p?"touchstart":"mousedown",i.$onFocusElementMouseDown))}),l.show&&r.$$postDigest(function(){"focus"===l.trigger?b[0].focus():i.show()})},i.destroy=function(){for(var a=l.trigger.split(" "),c=a.length;c--;){var d=a[c];"click"===d?b.off("click",i.toggle):"manual"!==d&&(b.off("hover"===d?"mouseenter":"focus",i.enter),b.off("hover"===d?"mouseleave":"blur",i.leave),"hover"!==d&&b.off(p?"touchstart":"mousedown",i.$onFocusElementMouseDown))}v&&(v.remove(),v=null),r.$destroy()},i.enter=function(){return clearTimeout(s),t="in",l.delay&&l.delay.show?void(s=setTimeout(function(){"in"===t&&i.show()},l.delay.show)):i.show()},i.show=function(){r.$emit(l.prefixClass+".show.before",i);var a=l.container?x:null,c=l.container?null:b;v&&v.remove(),v=i.$element=u(r,function(){}),v.css({top:"0px",left:"0px",display:"block"}).addClass(l.placement),l.animation&&v.addClass(l.animation),l.type&&v.addClass(l.prefixClass+"-"+l.type),h.enter(v,a,c,function(){r.$emit(l.prefixClass+".show",i)}),i.$isShown=r.$isShown=!0,r.$$phase||r.$root.$$phase||r.$digest(),k(i.$applyPlacement),l.keyboard&&("focus"!==l.trigger?(i.focus(),v.on("keyup",i.$onKeyUp)):b.on("keyup",i.$onFocusKeyUp))},i.leave=function(){return clearTimeout(s),t="out",l.delay&&l.delay.hide?void(s=setTimeout(function(){"out"===t&&i.hide()},l.delay.hide)):i.hide()},i.hide=function(a){return i.$isShown?(r.$emit(l.prefixClass+".hide.before",i),h.leave(v,function(){r.$emit(l.prefixClass+".hide",i),v=null}),i.$isShown=r.$isShown=!1,r.$$phase||r.$root.$$phase||r.$digest(),l.keyboard&&v.off("keyup",i.$onKeyUp),a&&"focus"===l.trigger?b[0].blur():void 0):void 0},i.toggle=function(){i.$isShown?i.leave():i.enter()},i.focus=function(){v[0].focus()},i.$applyPlacement=function(){if(v){var a=f(),b=v.prop("offsetWidth"),c=v.prop("offsetHeight"),d=g(l.placement,a,b,c);d.top+="px",d.left+="px",v.css(d)}},i.$onKeyUp=function(a){27===a.which&&i.hide()},i.$onFocusKeyUp=function(a){27===a.which&&b[0].blur()},i.$onFocusElementMouseDown=function(a){a.preventDefault(),a.stopPropagation(),i.$isShown?b[0].blur():b[0].focus()},i}function m(a,b){return angular.element((b||document).querySelectorAll(a))}function n(a){return e.when(f.get(a)||g.get(a)).then(function(b){return angular.isObject(b)?(f.put(a,b.data),b.data):b})}var o=String.prototype.trim,p="createTouch"in b.document,q=/ng-bind="/gi;return l}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$animateReflow",function(a,b,c,d,e){return{restrict:"EAC",scope:!0,link:function(a,b,f){var g={scope:a};angular.forEach(["template","contentTemplate","placement","container","delay","trigger","keyboard","html","animation","type"],function(a){angular.isDefined(f[a])&&(g[a]=f[a])}),angular.forEach(["title"],function(b){f[b]&&f.$observe(b,function(d,f){a[b]=c.trustAsHtml(d),angular.isDefined(f)&&e(function(){h&&h.$applyPlacement()})})}),f.bsTooltip&&a.$watch(f.bsTooltip,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b,angular.isDefined(c)&&e(function(){h&&h.$applyPlacement()})},!0);var h=d(b,g);a.$on("$destroy",function(){h.destroy(),g=null,h=null})}}}]),angular.module("mgcrea.ngStrap.tooltip").run(["$templateCache",function(a){a.put("tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="title"></div></div>')}]);
//# sourceMappingURL=tooltip.min.map