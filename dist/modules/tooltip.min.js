/**
 * angular-strap
 * @version v2.0.4 - 2014-07-24
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var t=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","dimensions","$$rAF",function(e,o,n,i,a,r,l,s,c){function u(e,i){function a(){return"body"===m.container?s.offset(m.target[0]||e[0]):s.position(m.target[0]||e[0])}function r(t,e,o,n){var i,a=t.split("-");switch(a[0]){case"right":i={top:e.top+e.height/2-n/2,left:e.left+e.width};break;case"bottom":i={top:e.top+e.height,left:e.left+e.width/2-o/2};break;case"left":i={top:e.top+e.height/2-n/2,left:e.left-o};break;default:i={top:e.top-n,left:e.left+e.width/2-o/2}}if(!a[1])return i;if("top"===a[0]||"bottom"===a[0])switch(a[1]){case"left":i.left=e.left;break;case"right":i.left=e.left+e.width-o}else if("left"===a[0]||"right"===a[0])switch(a[1]){case"top":i.top=e.top-n;break;case"bottom":i.top=e.top+e.height}return i}var u={},$=e[0].nodeName.toLowerCase(),m=u.$options=angular.extend({},t,i);u.$promise=p(m.template);var v=u.$scope=m.scope&&m.scope.$new()||o.$new();m.delay&&angular.isString(m.delay)&&(m.delay=parseFloat(m.delay)),m.title&&(u.$scope.title=m.title),v.$hide=function(){v.$$postDigest(function(){u.hide()})},v.$show=function(){v.$$postDigest(function(){u.show()})},v.$toggle=function(){v.$$postDigest(function(){u.toggle()})},u.$isShown=v.$isShown=!1;var w,y;m.contentTemplate&&(u.$promise=u.$promise.then(function(t){var e=angular.element(t);return p(m.contentTemplate).then(function(t){var o=f('[ng-bind="content"]',e[0]);return o.length||(o=f('[ng-bind="title"]',e[0])),o.removeAttr("ng-bind").html(t),e[0].outerHTML})}));var b,k,S,E;return u.$promise.then(function(t){angular.isObject(t)&&(t=t.data),m.html&&(t=t.replace(g,'ng-bind-html="')),t=h.apply(t),S=t,b=n(t),u.init()}),u.init=function(){m.delay&&angular.isNumber(m.delay)&&(m.delay={show:m.delay,hide:m.delay}),"self"===m.container?E=e:angular.isElement(m.container)?E=m.container:m.container&&(E=f(m.container));var t=m.trigger.split(" ");angular.forEach(t,function(t){"click"===t?e.on("click",u.toggle):"manual"!==t&&(e.on("hover"===t?"mouseenter":"focus",u.enter),e.on("hover"===t?"mouseleave":"blur",u.leave),"button"===$&&"hover"!==t&&e.on(d?"touchstart":"mousedown",u.$onFocusElementMouseDown))}),m.target&&(m.target=angular.isElement(m.target)?m.target:f(m.target)[0]),m.show&&v.$$postDigest(function(){"focus"===m.trigger?e[0].focus():u.show()})},u.destroy=function(){for(var t=m.trigger.split(" "),o=t.length;o--;){var n=t[o];"click"===n?e.off("click",u.toggle):"manual"!==n&&(e.off("hover"===n?"mouseenter":"focus",u.enter),e.off("hover"===n?"mouseleave":"blur",u.leave),"button"===$&&"hover"!==n&&e.off(d?"touchstart":"mousedown",u.$onFocusElementMouseDown))}k&&(k.remove(),k=null),clearTimeout(w),v.$destroy()},u.enter=function(){return clearTimeout(w),y="in",m.delay&&m.delay.show?void(w=setTimeout(function(){"in"===y&&u.show()},m.delay.show)):u.show()},u.show=function(){v.$emit(m.prefixEvent+".show.before",u);var t=m.container?E:null,o=m.container?null:e;k&&k.remove(),k=u.$element=b(v,function(){}),k.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}).addClass(m.placement),m.animation&&k.addClass(m.animation),m.type&&k.addClass(m.prefixClass+"-"+m.type),m.customClass&&k.addClass(m.customClass),l.enter(k,t,o,function(){v.$emit(m.prefixEvent+".show",u)}),u.$isShown=v.$isShown=!0,v.$$phase||v.$root&&v.$root.$$phase||v.$digest(),c(function(){u.$applyPlacement(),k.css({visibility:"visible"})}),m.keyboard&&("focus"!==m.trigger?(u.focus(),k.on("keyup",u.$onKeyUp)):e.on("keyup",u.$onFocusKeyUp))},u.leave=function(){return clearTimeout(w),y="out",m.delay&&m.delay.hide?void(w=setTimeout(function(){"out"===y&&u.hide()},m.delay.hide)):u.hide()},u.hide=function(t){return u.$isShown?(v.$emit(m.prefixEvent+".hide.before",u),l.leave(k,function(){v.$emit(m.prefixEvent+".hide",u)}),u.$isShown=v.$isShown=!1,v.$$phase||v.$root&&v.$root.$$phase||v.$digest(),m.keyboard&&null!==k&&k.off("keyup",u.$onKeyUp),t&&"focus"===m.trigger?e[0].blur():void 0):void 0},u.toggle=function(){u.$isShown?u.leave():u.enter()},u.focus=function(){k[0].focus()},u.$applyPlacement=function(){if(k){var t=a(),e=k.prop("offsetWidth"),o=k.prop("offsetHeight"),n=r(m.placement,t,e,o);n.top+="px",n.left+="px",k.css(n)}},u.$onKeyUp=function(t){27===t.which&&u.hide()},u.$onFocusKeyUp=function(t){27===t.which&&e[0].blur()},u.$onFocusElementMouseDown=function(t){t.preventDefault(),t.stopPropagation(),u.$isShown?e[0].blur():e[0].focus()},u}function f(t,e){return angular.element((e||document).querySelectorAll(t))}function p(t){return i.when(a.get(t)||r.get(t)).then(function(e){return angular.isObject(e)?(a.put(t,e.data),e.data):e})}var h=String.prototype.trim,d="createTouch"in e.document,g=/ng-bind="/gi;return u}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(t,e,o,n,i){return{restrict:"EAC",scope:!0,link:function(t,e,a){var r={scope:t};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","type","customClass"],function(t){angular.isDefined(a[t])&&(r[t]=a[t])}),angular.forEach(["title"],function(e){a.$observe(e,function(n,a){t[e]=o.trustAsHtml(n),angular.isDefined(a)&&i(function(){l&&l.$applyPlacement()})})}),a.bsTooltip&&t.$watch(a.bsTooltip,function(e,o){angular.isObject(e)?angular.extend(t,e):t.title=e,angular.isDefined(o)&&i(function(){l&&l.$applyPlacement()})},!0),a.bsShow&&t.$watch(a.bsShow,function(t){l&&angular.isDefined(t)&&(angular.isString(t)&&(t=t.match(",?(tooltip),?")),t===!0?l.show():l.hide())});var l=n(e,r);t.$on("$destroy",function(){l.destroy(),r=null,l=null})}}}]);
//# sourceMappingURL=tooltip.min.js.map