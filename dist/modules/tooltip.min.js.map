{"version":3,"file":"tooltip.min.js","sources":["tooltip\\tooltip.js"],"names":["angular","module","provider","defaults","this","animation","customClass","prefixClass","prefixEvent","container","target","placement","template","contentTemplate","trigger","keyboard","html","show","title","type","delay","$get","$window","$rootScope","$compile","$q","$templateCache","$http","$animate","dimensions","$$rAF","TooltipFactory","element","config","getPosition","options","offset","position","getCalculatedOffset","actualWidth","actualHeight","split","top","height","left","width","$tooltip","nodeName","toLowerCase","$options","extend","$promise","fetchTemplate","scope","$scope","$new","isString","parseFloat","$hide","$$postDigest","hide","$show","$toggle","toggle","$isShown","timeout","hoverState","then","templateEl","contentEl","findElement","length","removeAttr","outerHTML","tipLinker","tipElement","tipTemplate","tipContainer","isObject","data","replace","htmlReplaceRegExp","trim","apply","init","isNumber","isElement","triggers","forEach","on","enter","leave","isTouch","$onFocusElementMouseDown","focus","destroy","i","off","remove","clearTimeout","$destroy","setTimeout","$emit","parent","after","$element","css","display","visibility","addClass","$$phase","$root","$digest","$applyPlacement","$onKeyUp","$onFocusKeyUp","blur","elementPosition","tipWidth","prop","tipHeight","tipPosition","evt","which","preventDefault","stopPropagation","query","document","querySelectorAll","when","get","res","put","String","prototype","directive","$location","$sce","restrict","link","attr","key","isDefined","$observe","newValue","oldValue","trustAsHtml","tooltip","bsTooltip","$watch","bsShow","match","$on"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nangular.module('mgcrea.ngStrap.tooltip', ['mgcrea.ngStrap.helpers.dimensions'])\r\n\r\n  .provider('$tooltip', function() {\r\n\r\n    var defaults = this.defaults = {\r\n      animation: 'am-fade',\r\n      customClass: '',\r\n      prefixClass: 'tooltip',\r\n      prefixEvent: 'tooltip',\r\n      container: false,\r\n      target: false,\r\n      placement: 'top',\r\n      template: 'tooltip/tooltip.tpl.html',\r\n      contentTemplate: false,\r\n      trigger: 'hover focus',\r\n      keyboard: false,\r\n      html: false,\r\n      show: false,\r\n      title: '',\r\n      type: '',\r\n      delay: 0\r\n    };\r\n\r\n    this.$get = function($window, $rootScope, $compile, $q, $templateCache, $http, $animate, dimensions, $$rAF) {\r\n\r\n      var trim = String.prototype.trim;\r\n      var isTouch = 'createTouch' in $window.document;\r\n      var htmlReplaceRegExp = /ng-bind=\"/ig;\r\n\r\n      function TooltipFactory(element, config) {\r\n\r\n        var $tooltip = {};\r\n\r\n        // Common vars\r\n        var nodeName = element[0].nodeName.toLowerCase();\r\n        var options = $tooltip.$options = angular.extend({}, defaults, config);\r\n        $tooltip.$promise = fetchTemplate(options.template);\r\n        var scope = $tooltip.$scope = options.scope && options.scope.$new() || $rootScope.$new();\r\n        if(options.delay && angular.isString(options.delay)) {\r\n          options.delay = parseFloat(options.delay);\r\n        }\r\n\r\n        // Support scope as string options\r\n        if(options.title) {\r\n          $tooltip.$scope.title = options.title;\r\n        }\r\n\r\n        // Provide scope helpers\r\n        scope.$hide = function() {\r\n          scope.$$postDigest(function() {\r\n            $tooltip.hide();\r\n          });\r\n        };\r\n        scope.$show = function() {\r\n          scope.$$postDigest(function() {\r\n            $tooltip.show();\r\n          });\r\n        };\r\n        scope.$toggle = function() {\r\n          scope.$$postDigest(function() {\r\n            $tooltip.toggle();\r\n          });\r\n        };\r\n        $tooltip.$isShown = scope.$isShown = false;\r\n\r\n        // Private vars\r\n        var timeout, hoverState;\r\n\r\n        // Support contentTemplate option\r\n        if(options.contentTemplate) {\r\n          $tooltip.$promise = $tooltip.$promise.then(function(template) {\r\n            var templateEl = angular.element(template);\r\n            return fetchTemplate(options.contentTemplate)\r\n            .then(function(contentTemplate) {\r\n              var contentEl = findElement('[ng-bind=\"content\"]', templateEl[0]);\r\n              if(!contentEl.length) contentEl = findElement('[ng-bind=\"title\"]', templateEl[0]);\r\n              contentEl.removeAttr('ng-bind').html(contentTemplate);\r\n              return templateEl[0].outerHTML;\r\n            });\r\n          });\r\n        }\r\n\r\n        // Fetch, compile then initialize tooltip\r\n        var tipLinker, tipElement, tipTemplate, tipContainer;\r\n        $tooltip.$promise.then(function(template) {\r\n          if(angular.isObject(template)) template = template.data;\r\n          if(options.html) template = template.replace(htmlReplaceRegExp, 'ng-bind-html=\"');\r\n          template = trim.apply(template);\r\n          tipTemplate = template;\r\n          tipLinker = $compile(template);\r\n          $tooltip.init();\r\n        });\r\n\r\n        $tooltip.init = function() {\r\n\r\n          // Options: delay\r\n          if (options.delay && angular.isNumber(options.delay)) {\r\n            options.delay = {\r\n              show: options.delay,\r\n              hide: options.delay\r\n            };\r\n          }\r\n\r\n          // Replace trigger on touch devices ?\r\n          // if(isTouch && options.trigger === defaults.trigger) {\r\n          //   options.trigger.replace(/hover/g, 'click');\r\n          // }\r\n\r\n          // Options : container\r\n          if(options.container === 'self') {\r\n            tipContainer = element;\r\n          } else if(angular.isElement(options.container)) {\r\n            tipContainer = options.container;\r\n          } else if(options.container) {\r\n            tipContainer = findElement(options.container);\r\n          }\r\n\r\n          // Options: trigger\r\n          var triggers = options.trigger.split(' ');\r\n          angular.forEach(triggers, function(trigger) {\r\n            if(trigger === 'click') {\r\n              element.on('click', $tooltip.toggle);\r\n            } else if(trigger !== 'manual') {\r\n              element.on(trigger === 'hover' ? 'mouseenter' : 'focus', $tooltip.enter);\r\n              element.on(trigger === 'hover' ? 'mouseleave' : 'blur', $tooltip.leave);\r\n              nodeName === 'button' && trigger !== 'hover' && element.on(isTouch ? 'touchstart' : 'mousedown', $tooltip.$onFocusElementMouseDown);\r\n            }\r\n          });\r\n\r\n          // Options: target\r\n          if(options.target) {\r\n            options.target = angular.isElement(options.target) ? options.target : findElement(options.target)[0];\r\n          }\r\n\r\n          // Options: show\r\n          if(options.show) {\r\n            scope.$$postDigest(function() {\r\n              options.trigger === 'focus' ? element[0].focus() : $tooltip.show();\r\n            });\r\n          }\r\n\r\n        };\r\n\r\n        $tooltip.destroy = function() {\r\n\r\n          // Unbind events\r\n          var triggers = options.trigger.split(' ');\r\n          for (var i = triggers.length; i--;) {\r\n            var trigger = triggers[i];\r\n            if(trigger === 'click') {\r\n              element.off('click', $tooltip.toggle);\r\n            } else if(trigger !== 'manual') {\r\n              element.off(trigger === 'hover' ? 'mouseenter' : 'focus', $tooltip.enter);\r\n              element.off(trigger === 'hover' ? 'mouseleave' : 'blur', $tooltip.leave);\r\n              nodeName === 'button' && trigger !== 'hover' && element.off(isTouch ? 'touchstart' : 'mousedown', $tooltip.$onFocusElementMouseDown);\r\n            }\r\n          }\r\n\r\n          // Remove element\r\n          if(tipElement) {\r\n            tipElement.remove();\r\n            tipElement = null;\r\n          }\r\n\r\n          // Cancel pending callbacks\r\n          clearTimeout(timeout);\r\n\r\n          // Destroy scope\r\n          scope.$destroy();\r\n\r\n        };\r\n\r\n        $tooltip.enter = function() {\r\n\r\n          clearTimeout(timeout);\r\n          hoverState = 'in';\r\n          if (!options.delay || !options.delay.show) {\r\n            return $tooltip.show();\r\n          }\r\n\r\n          timeout = setTimeout(function() {\r\n            if (hoverState ==='in') $tooltip.show();\r\n          }, options.delay.show);\r\n\r\n        };\r\n\r\n        $tooltip.show = function() {\r\n\r\n          scope.$emit(options.prefixEvent + '.show.before', $tooltip);\r\n          var parent = options.container ? tipContainer : null;\r\n          var after = options.container ? null : element;\r\n\r\n          // Hide any existing tipElement\r\n          if(tipElement) tipElement.remove();\r\n          // Fetch a cloned element linked from template\r\n          tipElement = $tooltip.$element = tipLinker(scope, function(clonedElement, scope) {});\r\n\r\n          // Set the initial positioning.  Make the tooltip invisible\r\n          // so IE doesn't try to focus on it off screen.\r\n          tipElement.css({top: '-9999px', left: '-9999px', display: 'block', visibility: 'hidden'}).addClass(options.placement);\r\n\r\n          // Options: animation\r\n          if(options.animation) tipElement.addClass(options.animation);\r\n          // Options: type\r\n          if(options.type) tipElement.addClass(options.prefixClass + '-' + options.type);\r\n          // Options: custom classes\r\n          if(options.customClass) tipElement.addClass(options.customClass);\r\n\r\n          $animate.enter(tipElement, parent, after, function() {\r\n            scope.$emit(options.prefixEvent + '.show', $tooltip);\r\n          });\r\n          $tooltip.$isShown = scope.$isShown = true;\r\n          scope.$$phase || (scope.$root && scope.$root.$$phase) || scope.$digest();\r\n          $$rAF(function () {\r\n            $tooltip.$applyPlacement();\r\n\r\n            // Once placed, make the tooltip visible\r\n            tipElement.css({visibility: 'visible'});\r\n          }); // var a = bodyEl.offsetWidth + 1; ?\r\n\r\n          // Bind events\r\n          if(options.keyboard) {\r\n            if(options.trigger !== 'focus') {\r\n              $tooltip.focus();\r\n              tipElement.on('keyup', $tooltip.$onKeyUp);\r\n            } else {\r\n              element.on('keyup', $tooltip.$onFocusKeyUp);\r\n            }\r\n          }\r\n\r\n        };\r\n\r\n        $tooltip.leave = function() {\r\n\r\n          clearTimeout(timeout);\r\n          hoverState = 'out';\r\n          if (!options.delay || !options.delay.hide) {\r\n            return $tooltip.hide();\r\n          }\r\n          timeout = setTimeout(function () {\r\n            if (hoverState === 'out') {\r\n              $tooltip.hide();\r\n            }\r\n          }, options.delay.hide);\r\n\r\n        };\r\n\r\n        $tooltip.hide = function(blur) {\r\n\r\n          if(!$tooltip.$isShown) return;\r\n          scope.$emit(options.prefixEvent + '.hide.before', $tooltip);\r\n\r\n          $animate.leave(tipElement, function() {\r\n            scope.$emit(options.prefixEvent + '.hide', $tooltip);\r\n          });\r\n\r\n          $tooltip.$isShown = scope.$isShown = false;\r\n          scope.$$phase || (scope.$root && scope.$root.$$phase) || scope.$digest();\r\n\r\n          // Unbind events\r\n          if(options.keyboard && tipElement !== null) {\r\n            tipElement.off('keyup', $tooltip.$onKeyUp);\r\n          }\r\n\r\n          // Allow to blur the input when hidden, like when pressing enter key\r\n          if(blur && options.trigger === 'focus') {\r\n            return element[0].blur();\r\n          }\r\n\r\n        };\r\n\r\n        $tooltip.toggle = function() {\r\n          $tooltip.$isShown ? $tooltip.leave() : $tooltip.enter();\r\n        };\r\n\r\n        $tooltip.focus = function() {\r\n          tipElement[0].focus();\r\n        };\r\n\r\n        // Protected methods\r\n\r\n        $tooltip.$applyPlacement = function() {\r\n          if(!tipElement) return;\r\n\r\n          // Get the position of the tooltip element.\r\n          var elementPosition = getPosition();\r\n\r\n          // Get the height and width of the tooltip so we can center it.\r\n          var tipWidth = tipElement.prop('offsetWidth'),\r\n              tipHeight = tipElement.prop('offsetHeight');\r\n\r\n          // Get the tooltip's top and left coordinates to center it with this directive.\r\n          var tipPosition = getCalculatedOffset(options.placement, elementPosition, tipWidth, tipHeight);\r\n\r\n          // Now set the calculated positioning.\r\n          tipPosition.top += 'px';\r\n          tipPosition.left += 'px';\r\n          tipElement.css(tipPosition);\r\n\r\n        };\r\n\r\n        $tooltip.$onKeyUp = function(evt) {\r\n          evt.which === 27 && $tooltip.hide();\r\n        };\r\n\r\n        $tooltip.$onFocusKeyUp = function(evt) {\r\n          evt.which === 27 && element[0].blur();\r\n        };\r\n\r\n        $tooltip.$onFocusElementMouseDown = function(evt) {\r\n          evt.preventDefault();\r\n          evt.stopPropagation();\r\n          // Some browsers do not auto-focus buttons (eg. Safari)\r\n          $tooltip.$isShown ? element[0].blur() : element[0].focus();\r\n        };\r\n\r\n        // Private methods\r\n\r\n        function getPosition() {\r\n          if(options.container === 'body') {\r\n            return dimensions.offset(options.target[0] || element[0]);\r\n          } else {\r\n            return dimensions.position(options.target[0] || element[0]);\r\n          }\r\n        }\r\n\r\n        function getCalculatedOffset(placement, position, actualWidth, actualHeight) {\r\n          var offset;\r\n          var split = placement.split('-');\r\n\r\n          switch (split[0]) {\r\n          case 'right':\r\n            offset = {\r\n              top: position.top + position.height / 2 - actualHeight / 2,\r\n              left: position.left + position.width\r\n            };\r\n            break;\r\n          case 'bottom':\r\n            offset = {\r\n              top: position.top + position.height,\r\n              left: position.left + position.width / 2 - actualWidth / 2\r\n            };\r\n            break;\r\n          case 'left':\r\n            offset = {\r\n              top: position.top + position.height / 2 - actualHeight / 2,\r\n              left: position.left - actualWidth\r\n            };\r\n            break;\r\n          default:\r\n            offset = {\r\n              top: position.top - actualHeight,\r\n              left: position.left + position.width / 2 - actualWidth / 2\r\n            };\r\n            break;\r\n          }\r\n\r\n          if(!split[1]) {\r\n            return offset;\r\n          }\r\n\r\n          // Add support for corners @todo css\r\n          if(split[0] === 'top' || split[0] === 'bottom') {\r\n            switch (split[1]) {\r\n            case 'left':\r\n              offset.left = position.left;\r\n              break;\r\n            case 'right':\r\n              offset.left =  position.left + position.width - actualWidth;\r\n            }\r\n          } else if(split[0] === 'left' || split[0] === 'right') {\r\n            switch (split[1]) {\r\n            case 'top':\r\n              offset.top = position.top - actualHeight;\r\n              break;\r\n            case 'bottom':\r\n              offset.top = position.top + position.height;\r\n            }\r\n          }\r\n\r\n          return offset;\r\n        }\r\n\r\n        return $tooltip;\r\n\r\n      }\r\n\r\n      // Helper functions\r\n\r\n      function findElement(query, element) {\r\n        return angular.element((element || document).querySelectorAll(query));\r\n      }\r\n\r\n      function fetchTemplate(template) {\r\n        return $q.when($templateCache.get(template) || $http.get(template))\r\n        .then(function(res) {\r\n          if(angular.isObject(res)) {\r\n            $templateCache.put(template, res.data);\r\n            return res.data;\r\n          }\r\n          return res;\r\n        });\r\n      }\r\n\r\n      return TooltipFactory;\r\n\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsTooltip', function($window, $location, $sce, $tooltip, $$rAF) {\r\n\r\n    return {\r\n      restrict: 'EAC',\r\n      scope: true,\r\n      link: function postLink(scope, element, attr, transclusion) {\r\n\r\n        // Directive options\r\n        var options = {scope: scope};\r\n        angular.forEach(['template', 'contentTemplate', 'placement', 'container', 'target', 'delay', 'trigger', 'keyboard', 'html', 'animation', 'type', 'customClass'], function(key) {\r\n          if(angular.isDefined(attr[key])) options[key] = attr[key];\r\n        });\r\n\r\n        // Observe scope attributes for change\r\n        angular.forEach(['title'], function(key) {\r\n          attr.$observe(key, function(newValue, oldValue) {\r\n            scope[key] = $sce.trustAsHtml(newValue);\r\n            angular.isDefined(oldValue) && $$rAF(function() {\r\n              tooltip && tooltip.$applyPlacement();\r\n            });\r\n          });\r\n        });\r\n\r\n        // Support scope as an object\r\n        attr.bsTooltip && scope.$watch(attr.bsTooltip, function(newValue, oldValue) {\r\n          if(angular.isObject(newValue)) {\r\n            angular.extend(scope, newValue);\r\n          } else {\r\n            scope.title = newValue;\r\n          }\r\n          angular.isDefined(oldValue) && $$rAF(function() {\r\n            tooltip && tooltip.$applyPlacement();\r\n          });\r\n        }, true);\r\n\r\n        // Visibility binding support\r\n        attr.bsShow && scope.$watch(attr.bsShow, function(newValue, oldValue) {\r\n          if(!tooltip || !angular.isDefined(newValue)) return;\r\n          if(angular.isString(newValue)) newValue = newValue.match(',?(tooltip),?');\r\n          newValue === true ? tooltip.show() : tooltip.hide();\r\n        });\r\n\r\n        // Initialize popover\r\n        var tooltip = $tooltip(element, options);\r\n\r\n        // Garbage collection\r\n        scope.$on('$destroy', function() {\r\n          tooltip.destroy();\r\n          options = null;\r\n          tooltip = null;\r\n        });\r\n\r\n      }\r\n    };\r\n\r\n  });\r\n"],"sourceRoot":"/source/"}