/**
 * angular-strap
 * @version v2.2.4 - 2015-07-09
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.modal',['mgcrea.ngStrap.helpers.dimensions']).provider('$modal',function(){var n=this.defaults={animation:'am-fade',backdropAnimation:'am-fade',prefixClass:'modal',prefixEvent:'modal',placement:'top',template:'modal/modal.tpl.html',contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=['$window','$rootScope','$compile','$q','$templateCache','$http','$animate','$timeout','$sce','dimensions',function(e,t,o,i,a,r,l,c,s,u){function d(e){function i(){S.$emit(C.prefixEvent+'.show',y)}function a(){S.$emit(C.prefixEvent+'.hide',y),v.removeClass(C.prefixClass+'-open'),C.animation&&v.removeClass(C.prefixClass+'-with-'+C.animation)}function r(){C.backdrop&&(A.on('click',b),T.on('click',b),T.on('wheel',k))}function c(){C.backdrop&&(A.off('click',b),T.off('click',b),T.off('wheel',k))}function u(){C.keyboard&&A.on('keyup',y.$onKeyUp)}function d(){C.keyboard&&A.off('keyup',y.$onKeyUp)}function b(n){n.target===n.currentTarget&&('static'===C.backdrop?y.focus():y.hide())}function k(n){n.preventDefault()}function x(){y.$isShown&&null!==A&&(c(),d()),D&&(D.$destroy(),D=null),A&&(A.remove(),A=y.$element=null)}var y={},C=y.$options=angular.extend({},n,e);y.$promise=p(C.template);var S=y.$scope=C.scope&&C.scope.$new()||t.$new();C.element||C.container||(C.container='body'),y.$id=C.id||C.element&&C.element.attr('id')||'',$(['title','content'],function(n){C[n]&&(S[n]=s.trustAsHtml(C[n]))}),S.$hide=function(){S.$$postDigest(function(){y.hide()})},S.$show=function(){S.$$postDigest(function(){y.show()})},S.$toggle=function(){S.$$postDigest(function(){y.toggle()})},y.$isShown=S.$isShown=!1,C.contentTemplate&&(y.$promise=y.$promise.then(function(n){var t=angular.element(n);return p(C.contentTemplate).then(function(n){var o=m('[ng-bind="content"]',t[0]).removeAttr('ng-bind').html(n);return e.template||o.next().remove(),t[0].outerHTML})}));var E,A,D,T=angular.element('<div class="'+C.prefixClass+'-backdrop"/>');return T.css({position:'fixed',top:'0px',left:'0px',bottom:'0px',right:'0px','z-index':1038}),y.$promise.then(function(n){angular.isObject(n)&&(n=n.data),C.html&&(n=n.replace(w,'ng-bind-html="')),n=h.apply(n),E=o(n),y.init()}),y.init=function(){C.show&&S.$$postDigest(function(){y.show()})},y.destroy=function(){x(),T&&(T.remove(),T=null),S.$destroy()},y.show=function(){if(!y.$isShown){var n,e;if(angular.isElement(C.container)?(n=C.container,e=C.container[0].lastChild?angular.element(C.container[0].lastChild):null):C.container?(n=m(C.container),e=n[0]&&n[0].lastChild?angular.element(n[0].lastChild):null):(n=null,e=C.element),A&&x(),D=y.$scope.$new(),A=y.$element=E(D,function(n,e){}),!S.$emit(C.prefixEvent+'.show.before',y).defaultPrevented){A.css({display:'block'}).addClass(C.placement),C.animation&&(C.backdrop&&T.addClass(C.backdropAnimation),A.addClass(C.animation)),C.backdrop&&l.enter(T,v,null),angular.version.minor<=2?l.enter(A,n,e,i):l.enter(A,n,e).then(i),y.$isShown=S.$isShown=!0,f(S);var t=A[0];g(function(){t.focus()}),v.addClass(C.prefixClass+'-open'),C.animation&&v.addClass(C.prefixClass+'-with-'+C.animation),r(),u()}}},y.hide=function(){y.$isShown&&(S.$emit(C.prefixEvent+'.hide.before',y).defaultPrevented||(angular.version.minor<=2?l.leave(A,a):l.leave(A).then(a),C.backdrop&&l.leave(T),y.$isShown=S.$isShown=!1,f(S),c(),d()))},y.toggle=function(){y.$isShown?y.hide():y.show()},y.focus=function(){A[0].focus()},y.$onKeyUp=function(n){27===n.which&&y.$isShown&&(y.hide(),n.stopPropagation())},y}function f(n){n.$$phase||n.$root&&n.$root.$$phase||n.$digest()}function m(n,e){return angular.element((e||document).querySelectorAll(n))}function p(n){return b[n]?b[n]:b[n]=r.get(n,{cache:a}).then(function(n){return n.data})}var $=angular.forEach,h=String.prototype.trim,g=e.requestAnimationFrame||e.setTimeout,v=angular.element(e.document.body),w=/ng-bind="/gi,b={};return d}]}).directive('bsModal',['$window','$sce','$modal',function(n,e,t){return{restrict:'EAC',scope:!0,link:function(n,o,i,a){var r={scope:n,element:o,show:!1};angular.forEach(['template','contentTemplate','placement','backdrop','keyboard','html','container','animation','id','prefixEvent','prefixClass'],function(n){angular.isDefined(i[n])&&(r[n]=i[n])});var l=/^(false|0|)$/i;angular.forEach(['backdrop','keyboard','html','container'],function(n){angular.isDefined(i[n])&&l.test(i[n])&&(r[n]=!1)}),angular.forEach(['title','content'],function(t){i[t]&&i.$observe(t,function(o,i){n[t]=e.trustAsHtml(o)})}),i.bsModal&&n.$watch(i.bsModal,function(e,t){angular.isObject(e)?angular.extend(n,e):n.content=e},!0);var c=t(r);o.on(i.trigger||'click',c.toggle),n.$on('$destroy',function(){c&&c.destroy(),r=null,c=null})}}}]);
//# sourceMappingURL=../modules/modal.min.js.map