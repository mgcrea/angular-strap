/**
 * angular-strap
 * @version v2.3.12 - 2017-01-26
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.modal',['mgcrea.ngStrap.core','mgcrea.ngStrap.helpers.dimensions']).provider('$modal',function(){var n=this.defaults={animation:'am-fade',backdropAnimation:'am-fade',customClass:'',prefixClass:'modal',prefixEvent:'modal',placement:'top',templateUrl:'modal/modal.tpl.html',template:'',contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0,size:null,zIndex:null};this.$get=['$window','$rootScope','$bsCompiler','$animate','$timeout','$sce','dimensions',function(e,o,t,a,i,l,s){function r(e){function i(){D.$emit(y.prefixEvent+'.show',S),angular.isDefined(y.onShow)&&angular.isFunction(y.onShow)&&y.onShow(S)}function s(){D.$emit(y.prefixEvent+'.hide',S),angular.isDefined(y.onHide)&&angular.isFunction(y.onHide)&&y.onHide(S),d('.modal').length<=0&&m.removeClass(y.prefixClass+'-open'),y.animation&&m.removeClass(y.prefixClass+'-with-'+y.animation)}function r(){y.backdrop&&(A.on('click',C),B.on('click',C),B.on('wheel',k))}function w(){y.backdrop&&(A.off('click',C),B.off('click',C),B.off('wheel',k))}function v(){y.keyboard&&A.on('keyup',S.$onKeyUp)}function b(){y.keyboard&&A.off('keyup',S.$onKeyUp)}function C(n){n.target===n.currentTarget&&('static'===y.backdrop?S.focus():S.hide())}function k(n){n.preventDefault()}function x(){S.$isShown&&null!==A&&(w(),b()),H&&(H.$destroy(),H=null),A&&(A.remove(),A=S.$element=null)}var S={},y=S.$options=angular.extend({},n,e),E=S.$promise=t.compile(y),D=S.$scope=y.scope&&y.scope.$new()||o.$new();y.element||y.container||(y.container='body'),y.zIndex&&(h=parseInt(y.zIndex,10),$=h-10),S.$id=y.id||y.element&&y.element.attr('id')||'',u(['title','content'],function(n){y[n]&&(D[n]=l.trustAsHtml(y[n]))}),D.$hide=function(){D.$$postDigest(function(){S.hide()})},D.$show=function(){D.$$postDigest(function(){S.show()})},D.$toggle=function(){D.$$postDigest(function(){S.toggle()})},S.$isShown=D.$isShown=!1;var z,A,H,B=angular.element('<div class="'+y.prefixClass+'-backdrop"/>');return B.css({position:'fixed',top:'0px',left:'0px',bottom:'0px',right:'0px'}),E.then(function(n){z=n,S.init()}),S.init=function(){y.show&&D.$$postDigest(function(){S.show()})},S.destroy=function(){x(),B&&(B.remove(),B=null),D.$destroy()},S.show=function(){if(!S.$isShown){var n,e;if(angular.isElement(y.container)?(n=y.container,e=y.container[0].lastChild?angular.element(y.container[0].lastChild):null):y.container?(n=d(y.container),e=n[0]&&n[0].lastChild?angular.element(n[0].lastChild):null):(n=null,e=y.element),A&&x(),H=S.$scope.$new(),A=S.$element=z.link(H,function(n,e){}),y.backdrop&&(A.css({'z-index':h+20*p}),B.css({'z-index':$+20*p}),p++),!D.$emit(y.prefixEvent+'.show.before',S).defaultPrevented){angular.isDefined(y.onBeforeShow)&&angular.isFunction(y.onBeforeShow)&&y.onBeforeShow(S),A.css({display:'block'}).addClass(y.placement),y.customClass&&A.addClass(y.customClass),y.size&&g[y.size]&&angular.element(d('.modal-dialog',A[0])).addClass(g[y.size]),y.animation&&(y.backdrop&&B.addClass(y.backdropAnimation),A.addClass(y.animation)),y.backdrop&&a.enter(B,m,null),angular.version.minor<=2?a.enter(A,n,e,i):a.enter(A,n,e).then(i),S.$isShown=D.$isShown=!0,c(D);var o=A[0];f(function(){o.focus()}),m.addClass(y.prefixClass+'-open'),y.animation&&m.addClass(y.prefixClass+'-with-'+y.animation),r(),v()}}},S.hide=function(){S.$isShown&&(D.$emit(y.prefixEvent+'.hide.before',S).defaultPrevented||(angular.isDefined(y.onBeforeHide)&&angular.isFunction(y.onBeforeHide)&&y.onBeforeHide(S),angular.version.minor<=2?a.leave(A,s):a.leave(A).then(s),y.backdrop&&(p--,a.leave(B)),S.$isShown=D.$isShown=!1,c(D),w(),b()))},S.toggle=function(){S.$isShown?S.hide():S.show()},S.focus=function(){A[0].focus()},S.$onKeyUp=function(n){27===n.which&&S.$isShown&&(S.hide(),n.stopPropagation())},S}function c(n){n.$$phase||n.$root&&n.$root.$$phase||n.$digest()}function d(n,e){return angular.element((e||document).querySelectorAll(n))}var u=angular.forEach,f=e.requestAnimationFrame||e.setTimeout,m=angular.element(e.document.body),p=0,h=1050,$=1040,g={lg:'modal-lg',sm:'modal-sm'};return r}]}).directive('bsModal',['$window','$sce','$parse','$modal',function(n,e,o,t){return{restrict:'EAC',scope:!0,link:function(n,o,a,i){var l={scope:n,element:o,show:!1};angular.forEach(['template','templateUrl','controller','controllerAs','contentTemplate','placement','backdrop','keyboard','html','container','animation','backdropAnimation','id','prefixEvent','prefixClass','customClass','modalClass','size','zIndex'],function(n){angular.isDefined(a[n])&&(l[n]=a[n])}),l.modalClass&&(l.customClass=l.modalClass);var s=/^(false|0|)$/i;angular.forEach(['backdrop','keyboard','html','container'],function(n){angular.isDefined(a[n])&&s.test(a[n])&&(l[n]=!1)}),angular.forEach(['onBeforeShow','onShow','onBeforeHide','onHide'],function(e){var o='bs'+e.charAt(0).toUpperCase()+e.slice(1);angular.isDefined(a[o])&&(l[e]=n.$eval(a[o]))}),angular.forEach(['title','content'],function(o){a[o]&&a.$observe(o,function(t,a){n[o]=e.trustAsHtml(t)})}),a.bsModal&&n.$watch(a.bsModal,function(e,o){angular.isObject(e)?angular.extend(n,e):n.content=e},!0);var r=t(l);o.on(a.trigger||'click',r.toggle),n.$on('$destroy',function(){r&&r.destroy(),l=null,r=null})}}}]);
//# sourceMappingURL=modal.min.js.map
