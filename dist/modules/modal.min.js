/**
 * angular-strap
 * @version v2.0.0-rc.4 - 2014-04-02
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.modal",["mgcrea.ngStrap.helpers.dimensions"]).provider("$modal",function(){var a=this.defaults={animation:"am-fade",backdropAnimation:"am-fade",prefixClass:"modal",placement:"top",template:"modal/modal.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","$sce","dimensions",function(b,c,d,e,f,g,h,i,j){function k(b){function e(a){a.target===a.currentTarget&&("static"===g.backdrop?f.focus():f.hide())}var f={},g=f.$options=angular.extend({},a,b);f.$promise=m(g.template);var i=f.$scope=g.scope&&g.scope.$new()||c.$new();g.element||g.container||(g.container="body"),n(["title","content"],function(a){g[a]&&(i[a]=j.trustAsHtml(g[a]))}),i.$hide=function(){i.$$postDigest(function(){f.hide()})},i.$show=function(){i.$$postDigest(function(){f.show()})},i.$toggle=function(){i.$$postDigest(function(){f.toggle()})},g.contentTemplate&&(f.$promise=f.$promise.then(function(a){var c=angular.element(a);return m(g.contentTemplate).then(function(a){var d=l('[ng-bind="content"]',c[0]).removeAttr("ng-bind").html(a);return b.template||d.next().remove(),c[0].outerHTML})}));var k,s,t=angular.element('<div class="'+g.prefixClass+'-backdrop"/>');return f.$promise.then(function(a){angular.isObject(a)&&(a=a.data),g.html&&(a=a.replace(r,'ng-bind-html="')),a=o.apply(a),k=d(a),f.init()}),f.init=function(){g.show&&i.$$postDigest(function(){f.show()})},f.destroy=function(){s&&(s.remove(),s=null),t&&(t.remove(),t=null),i.$destroy()},f.show=function(){i.$emit(g.prefixClass+".show.before",f);var a=g.container?l(g.container):null,b=g.container?null:g.element;s=f.$element=k(i,function(){}),s.css({display:"block"}).addClass(g.placement),g.animation&&(g.backdrop&&t.addClass(g.backdropAnimation),s.addClass(g.animation)),g.backdrop&&h.enter(t,q,null,function(){}),h.enter(s,a,b,function(){i.$emit(g.prefixClass+".show",f)}),i.$isShown=!0,i.$$phase||i.$root.$$phase||i.$digest();var c=s[0];p(function(){c.focus()}),q.addClass(g.prefixClass+"-open"),g.animation&&q.addClass(g.prefixClass+"-with-"+g.animation),g.backdrop&&(s.on("click",e),t.on("click",e)),g.keyboard&&s.on("keyup",f.$onKeyUp)},f.hide=function(){i.$emit(g.prefixClass+".hide.before",f),h.leave(s,function(){i.$emit(g.prefixClass+".hide",f),q.removeClass(g.prefixClass+"-open"),g.animation&&q.addClass(g.prefixClass+"-with-"+g.animation)}),g.backdrop&&h.leave(t,function(){}),i.$isShown=!1,i.$$phase||i.$root.$$phase||i.$digest(),g.backdrop&&(s.off("click",e),t.off("click",e)),g.keyboard&&s.off("keyup",f.$onKeyUp)},f.toggle=function(){i.$isShown?f.hide():f.show()},f.focus=function(){s[0].focus()},f.$onKeyUp=function(a){27===a.which&&f.hide()},f}function l(a,b){return angular.element((b||document).querySelectorAll(a))}function m(a){return e.when(f.get(a)||g.get(a)).then(function(b){return angular.isObject(b)?(f.put(a,b.data),b.data):b})}var n=angular.forEach,o=String.prototype.trim,p=b.requestAnimationFrame||b.setTimeout,q=angular.element(b.document.body),r=/ng-bind="/gi;return k}]}).directive("bsModal",["$window","$location","$sce","$modal",function(a,b,c,d){return{restrict:"EAC",scope:!0,link:function(a,b,e){var f={scope:a,element:b,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(a){angular.isDefined(e[a])&&(f[a]=e[a])}),angular.forEach(["title","content"],function(b){e[b]&&e.$observe(b,function(d){a[b]=c.trustAsHtml(d)})}),e.bsModal&&a.$watch(e.bsModal,function(b){angular.isObject(b)?angular.extend(a,b):a.content=b},!0);var g=d(f);b.on(e.trigger||"click",g.toggle),a.$on("$destroy",function(){g.destroy(),f=null,g=null})}}}]),angular.module("mgcrea.ngStrap.modal").run(["$templateCache",function(a){a.put("modal/modal.tpl.html",'<div class="modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-bind="content"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]);
//# sourceMappingURL=modal.min.map