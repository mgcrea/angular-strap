/**
 * angular-strap
 * @version v2.3.12 - 2017-04-17
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.modal',['mgcrea.ngStrap.core','mgcrea.ngStrap.helpers.dimensions']).provider('$modal',function(){var e=this.defaults={animation:'am-fade',backdropAnimation:'am-fade',customClass:'',prefixClass:'modal',prefixEvent:'modal',placement:'top',templateUrl:'modal/modal.tpl.html',template:'',contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0,size:null,zIndex:null};this.$get=['$window','$rootScope','$bsCompiler','$animate','$timeout','$sce','dimensions',function(n,o,t,a,i,r,l){function s(n){function i(){z.$emit(E.prefixEvent+'.show',D),angular.isDefined(E.onShow)&&angular.isFunction(E.onShow)&&E.onShow(D),F.attr('aria-hidden','false'),F[0].focus()}function l(){z.$emit(E.prefixEvent+'.hide',D),angular.isDefined(E.onHide)&&angular.isFunction(E.onHide)&&E.onHide(D),u('.modal').length<=0&&(m.removeClass(E.prefixClass+'-open'),m.attr('aria-hidden','false')),E.animation&&m.removeClass(E.prefixClass+'-with-'+E.animation)}function s(){var e='a:not([disabled]), button:not([disabled]), input[type=text]:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])';if(document.activeElement){var n=Array.prototype.filter.call(F[0].querySelectorAll(e),function(e){return e.offsetWidth>0||e.offsetHeight>0||e===document.activeElement});return n}}function v(e){if(document.activeElement){var n=s();if(void 0===n)return;e&&(n=Array.prototype.reverse.call(n));var o=n.indexOf(document.activeElement);return n[o+1]}}function w(){E.backdrop&&(F.on('click',C),K.on('click',C),K.on('wheel',x))}function b(){E.backdrop&&(F.off('click',C),K.off('click',C),K.off('wheel',x))}function y(){E.keyboard&&(F.on('keyup',D.$onKeyUp),F.on('keydown',D.$onKeyDown))}function k(){E.keyboard&&(F.off('keyup',D.$onKeyUp),F.off('keydown',D.$onKeyDown))}function C(e){e.target===e.currentTarget&&('static'===E.backdrop?D.focus():D.hide())}function x(e){e.preventDefault()}function S(){D.$isShown&&null!==F&&(b(),k()),B&&(B.$destroy(),B=null),F&&(F.remove(),F=D.$element=null)}var D={},E=D.$options=angular.extend({},e,n),A=D.$promise=t.compile(E),z=D.$scope=E.scope&&E.scope.$new()||o.$new();E.element||E.container||(E.container='body'),E.zIndex&&(h=parseInt(E.zIndex,10),$=h-10),D.$id=E.id||E.element&&E.element.attr('id')||'',D.returnFocus=function(){},d(['title','content'],function(e){E[e]&&(z[e]=r.trustAsHtml(E[e]))}),z.$hide=function(){z.$$postDigest(function(){D.hide()})},z.$show=function(){z.$$postDigest(function(){D.show()})},z.$toggle=function(){z.$$postDigest(function(){D.toggle()})},D.$isShown=z.$isShown=!1;var H,F,B,K=angular.element('<div class="'+E.prefixClass+'-backdrop"/>');return K.css({position:'fixed',top:'0px',left:'0px',bottom:'0px',right:'0px'}),A.then(function(e){H=e,D.init()}),D.init=function(){E.show&&z.$$postDigest(function(){D.show()})},D.destroy=function(){S(),K&&(K.remove(),K=null),z.$destroy()},D.show=function(){if(!D.$isShown){var e,n;if(angular.isElement(E.container)?(e=E.container,n=E.container[0].lastChild?angular.element(E.container[0].lastChild):null):E.container?(e=u(E.container),n=e[0]&&e[0].lastChild?angular.element(e[0].lastChild):null):(e=null,n=E.element),F&&S(),B=D.$scope.$new(),F=D.$element=H.link(B,function(e,n){}),E.backdrop&&(F.css({'z-index':h+20*p}),K.css({'z-index':$+20*p}),p++),!z.$emit(E.prefixEvent+'.show.before',D).defaultPrevented){angular.isDefined(E.onBeforeShow)&&angular.isFunction(E.onBeforeShow)&&E.onBeforeShow(D),F.css({display:'block'}).addClass(E.placement),E.customClass&&F.addClass(E.customClass),E.size&&g[E.size]&&angular.element(u('.modal-dialog',F[0])).addClass(g[E.size]),E.animation&&(E.backdrop&&K.addClass(E.backdropAnimation),F.addClass(E.animation)),E.backdrop&&a.enter(K,m,null),angular.version.minor<=2?a.enter(F,e,n,i):a.enter(F,e,n).then(i),D.$isShown=z.$isShown=!0,c(z);var o=F[0];f(function(){o.focus()}),m.addClass(E.prefixClass+'-open'),m.attr('aria-hidden','true'),E.animation&&m.addClass(E.prefixClass+'-with-'+E.animation),w(),y()}}},D.hide=function(){D.$isShown&&(z.$emit(E.prefixEvent+'.hide.before',D).defaultPrevented||(angular.isDefined(E.onBeforeHide)&&angular.isFunction(E.onBeforeHide)&&E.onBeforeHide(D),F.attr('aria-hidden','true'),D.returnFocus&&'function'==typeof D.returnFocus&&D.returnFocus(),angular.version.minor<=2?a.leave(F,l):a.leave(F).then(l),E.backdrop&&(p--,a.leave(K)),D.$isShown=z.$isShown=!1,c(z),b(),k()))},D.toggle=function(){D.$isShown?D.hide():D.show()},D.focus=function(){F[0].focus()},D.$onKeyUp=function(e){27===e.which&&D.$isShown&&(D.hide(),e.stopPropagation())},D.$onKeyDown=function(e){if(E.keyboard&&9===e.keyCode){var n=v(e.shiftKey);if(void 0===n){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();var o=s();e.shiftKey?o[o.length-1].focus():o[0].focus()}}},D}function c(e){e.$$phase||e.$root&&e.$root.$$phase||e.$digest()}function u(e,n){return angular.element((n||document).querySelectorAll(e))}var d=angular.forEach,f=n.requestAnimationFrame||n.setTimeout,m=angular.element(n.document.body),p=0,h=1050,$=1040,g={lg:'modal-lg',sm:'modal-sm'};return s}]}).directive('bsModal',['$window','$sce','$parse','$modal',function(e,n,o,t){return{restrict:'EAC',scope:!0,link:function(e,o,a,i){var r={scope:e,element:o,show:!1};angular.forEach(['template','templateUrl','controller','controllerAs','contentTemplate','placement','backdrop','keyboard','html','container','animation','backdropAnimation','id','prefixEvent','prefixClass','customClass','modalClass','size','zIndex'],function(e){angular.isDefined(a[e])&&(r[e]=a[e])}),r.modalClass&&(r.customClass=r.modalClass);var l=/^(false|0|)$/i;angular.forEach(['backdrop','keyboard','html','container'],function(e){angular.isDefined(a[e])&&l.test(a[e])&&(r[e]=!1)}),angular.forEach(['onBeforeShow','onShow','onBeforeHide','onHide'],function(n){var o='bs'+n.charAt(0).toUpperCase()+n.slice(1);angular.isDefined(a[o])&&(r[n]=e.$eval(a[o]))}),angular.forEach(['title','content'],function(o){a[o]&&a.$observe(o,function(t,a){e[o]=n.trustAsHtml(t)})}),a.bsModal&&e.$watch(a.bsModal,function(n,o){angular.isObject(n)?angular.extend(e,n):e.content=n},!0);var s=t(r);r.keyboard&&(s.returnFocus=function(){o[0].focus()}),o.on(a.trigger||'click',s.toggle),e.$on('$destroy',function(){s&&s.destroy(),r=null,s=null})}}}]);
//# sourceMappingURL=modal.min.js.map
