/**
 * angular-strap
 * @version v2.3.7 - 2016-01-16
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.modal',['mgcrea.ngStrap.core','mgcrea.ngStrap.helpers.dimensions']).provider('$modal',function(){var n=this.defaults={animation:'am-fade',backdropAnimation:'am-fade',customClass:'',prefixClass:'modal',prefixEvent:'modal',placement:'top',templateUrl:'modal/modal.tpl.html',template:'',contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=['$window','$rootScope','$bsCompiler','$animate','$timeout','$sce','dimensions',function(e,t,o,a,i,l,s){function r(e){function i(){E.$emit(y.prefixEvent+'.show',x)}function s(){E.$emit(y.prefixEvent+'.hide',x),m.removeClass(y.prefixClass+'-open'),y.animation&&m.removeClass(y.prefixClass+'-with-'+y.animation)}function r(){y.backdrop&&(D.on('click',v),T.on('click',v),T.on('wheel',k))}function g(){y.backdrop&&(D.off('click',v),T.off('click',v),T.off('wheel',k))}function w(){y.keyboard&&D.on('keyup',x.$onKeyUp)}function b(){y.keyboard&&D.off('keyup',x.$onKeyUp)}function v(n){n.target===n.currentTarget&&('static'===y.backdrop?x.focus():x.hide())}function k(n){n.preventDefault()}function C(){x.$isShown&&null!==D&&(g(),b()),U&&(U.$destroy(),U=null),D&&(D.remove(),D=x.$element=null)}var x={},y=x.$options=angular.extend({},n,e),S=x.$promise=o.compile(y),E=x.$scope=y.scope&&y.scope.$new()||t.$new();y.element||y.container||(y.container='body'),x.$id=y.id||y.element&&y.element.attr('id')||'',d(['title','content'],function(n){y[n]&&(E[n]=l.trustAsHtml(y[n]))}),E.$hide=function(){E.$$postDigest(function(){x.hide()})},E.$show=function(){E.$$postDigest(function(){x.show()})},E.$toggle=function(){E.$$postDigest(function(){x.toggle()})},x.$isShown=E.$isShown=!1;var A,D,U,T=angular.element('<div class="'+y.prefixClass+'-backdrop"/>');return T.css({position:'fixed',top:'0px',left:'0px',bottom:'0px',right:'0px'}),S.then(function(n){A=n,x.init()}),x.init=function(){y.show&&E.$$postDigest(function(){x.show()})},x.destroy=function(){C(),T&&(T.remove(),T=null),E.$destroy()},x.show=function(){if(!x.$isShown){var n,e;if(angular.isElement(y.container)?(n=y.container,e=y.container[0].lastChild?angular.element(y.container[0].lastChild):null):y.container?(n=u(y.container),e=n[0]&&n[0].lastChild?angular.element(n[0].lastChild):null):(n=null,e=y.element),D&&C(),U=x.$scope.$new(),D=x.$element=A.link(U,function(n,e){}),y.backdrop&&(D.css({'z-index':$+20*p}),T.css({'z-index':h+20*p}),p++),!E.$emit(y.prefixEvent+'.show.before',x).defaultPrevented){D.css({display:'block'}).addClass(y.placement),y.customClass&&D.addClass(y.customClass),y.animation&&(y.backdrop&&T.addClass(y.backdropAnimation),D.addClass(y.animation)),y.backdrop&&a.enter(T,m,null),angular.version.minor<=2?a.enter(D,n,e,i):a.enter(D,n,e).then(i),x.$isShown=E.$isShown=!0,c(E);var t=D[0];f(function(){t.focus()}),m.addClass(y.prefixClass+'-open'),y.animation&&m.addClass(y.prefixClass+'-with-'+y.animation),r(),w()}}},x.hide=function(){x.$isShown&&(y.backdrop&&p--,E.$emit(y.prefixEvent+'.hide.before',x).defaultPrevented||(angular.version.minor<=2?a.leave(D,s):a.leave(D).then(s),y.backdrop&&a.leave(T),x.$isShown=E.$isShown=!1,c(E),g(),b()))},x.toggle=function(){x.$isShown?x.hide():x.show()},x.focus=function(){D[0].focus()},x.$onKeyUp=function(n){27===n.which&&x.$isShown&&(x.hide(),n.stopPropagation())},x}function c(n){n.$$phase||n.$root&&n.$root.$$phase||n.$digest()}function u(n,e){return angular.element((e||document).querySelectorAll(n))}var d=angular.forEach,f=e.requestAnimationFrame||e.setTimeout,m=angular.element(e.document.body),p=0,$=1050,h=1040;return r}]}).directive('bsModal',['$window','$sce','$modal',function(n,e,t){return{restrict:'EAC',scope:!0,link:function(n,o,a,i){var l={scope:n,element:o,show:!1};angular.forEach(['template','templateUrl','controller','controllerAs','contentTemplate','placement','backdrop','keyboard','html','container','animation','backdropAnimation','id','prefixEvent','prefixClass','customClass','modalClass'],function(n){angular.isDefined(a[n])&&(l[n]=a[n])}),l.modalClass&&(l.customClass=l.modalClass);var s=/^(false|0|)$/i;angular.forEach(['backdrop','keyboard','html','container'],function(n){angular.isDefined(a[n])&&s.test(a[n])&&(l[n]=!1)}),angular.forEach(['title','content'],function(t){a[t]&&a.$observe(t,function(o,a){n[t]=e.trustAsHtml(o)})}),a.bsModal&&n.$watch(a.bsModal,function(e,t){angular.isObject(e)?angular.extend(n,e):n.content=e},!0);var r=t(l);o.on(a.trigger||'click',r.toggle),n.$on('$destroy',function(){r&&r.destroy(),l=null,r=null})}}}]);
//# sourceMappingURL=modal.min.js.map
