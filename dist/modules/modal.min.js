/**
 * angular-strap
 * @version v2.0.0-rc.3 - 2014-02-19
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.modal",["mgcrea.ngStrap.helpers.dimensions"]).provider("$modal",function(){var a=this.defaults={animation:"am-fade",backdropAnimation:"am-fade",prefixClass:"modal",placement:"top",template:"modal/modal.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","dimensions",function(b,c,d,e,f,g,h){function i(b){function e(a){a.target===a.currentTarget&&("static"===g.backdrop?f.focus():f.hide())}var f={},g=angular.extend({},a,b);f.$promise=k(g.template);var i=f.$scope=g.scope&&g.scope.$new()||c.$new();g.element||g.container||(g.container="body"),g.scope||l(["title","content"],function(a){g[a]&&(i[a]=g[a])}),i.$hide=function(){i.$$postDigest(function(){f.hide()})},i.$show=function(){i.$$postDigest(function(){f.show()})},i.$toggle=function(){i.$$postDigest(function(){f.toggle()})},g.contentTemplate&&(f.$promise=f.$promise.then(function(a){var c=angular.element(a);return k(g.contentTemplate).then(function(a){var d=j('[ng-bind="content"]',c[0]).removeAttr("ng-bind").html(a);return b.template||d.next().remove(),c[0].outerHTML})}));var q,r,s=angular.element('<div class="'+g.prefixClass+'-backdrop"/>');return f.$promise.then(function(a){angular.isObject(a)&&(a=a.data),g.html&&(a=a.replace(p,'ng-bind-html="')),a=m.apply(a),q=d(a),f.init()}),f.init=function(){g.show&&i.$$postDigest(function(){f.show()})},f.destroy=function(){r&&(r.remove(),r=null),s&&(s.remove(),s=null),i.$destroy()},f.show=function(){var a=g.container?j(g.container):null,b=g.container?null:g.element;r=f.$element=q(i,function(){}),r.css({display:"block"}).addClass(g.placement),g.animation&&(g.backdrop&&s.addClass(g.backdropAnimation),r.addClass(g.animation)),g.backdrop&&h.enter(s,o,null,function(){}),h.enter(r,a,b,function(){}),i.$isShown=!0,c.$$phase||c.$digest();var d=r[0];n(function(){d.focus()}),o.addClass(g.prefixClass+"-open"),g.backdrop&&(r.on("click",e),s.on("click",e)),g.keyboard&&r.on("keyup",f.$onKeyUp)},f.hide=function(){h.leave(r,function(){o.removeClass(g.prefixClass+"-open")}),g.backdrop&&h.leave(s,function(){}),i.$isShown=!1,i.$$phase||i.$digest(),g.backdrop&&(r.off("click",e),s.off("click",e)),g.keyboard&&r.off("keyup",f.$onKeyUp)},f.toggle=function(){i.$isShown?f.hide():f.show()},f.focus=function(){r[0].focus()},f.$onKeyUp=function(a){27===a.which&&f.hide()},f}function j(a,b){return angular.element((b||document).querySelectorAll(a))}function k(a){return e.when(f.get(a)||g.get(a)).then(function(b){return angular.isObject(b)?(f.put(a,b.data),b.data):b})}var l=angular.forEach,m=String.prototype.trim,n=b.requestAnimationFrame||b.setTimeout,o=angular.element(b.document.body),p=/ng-bind="/gi;return i}]}).directive("bsModal",["$window","$location","$sce","$modal",function(a,b,c,d){return{restrict:"EAC",scope:!0,link:function(a,b,e){var f={scope:a,element:b,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(a){angular.isDefined(e[a])&&(f[a]=e[a])}),angular.forEach(["title","content"],function(b){e[b]&&e.$observe(b,function(d){a[b]=c.getTrustedHtml(d)})}),e.bsModal&&a.$watch(e.bsModal,function(b){angular.isObject(b)?angular.extend(a,b):a.content=b},!0);var g=d(f);b.on(e.trigger||"click",g.toggle),a.$on("$destroy",function(){g.destroy(),f=null,g=null})}}}]),angular.module("mgcrea.ngStrap.modal").run(["$templateCache",function(a){a.put("modal/modal.tpl.html",'<div class="modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-bind="content"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]);
//# sourceMappingURL=modal.min.map