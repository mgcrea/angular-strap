/**
 * angular-strap
 * @version v2.3.12 - 2019-12-11
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.collapse',[]).provider('$collapse',function(){var t=this.defaults={animation:'am-collapse',disallowToggle:!1,activeClass:'in',startCollapsed:!1,allowMultiple:!1},e=this.controller=function(e,a,s){function i(t){for(var e=o.$targets.$active,a=0;a<e.length;a++)t<e[a]&&(e[a]=e[a]-1),e[a]===o.$targets.length&&(e[a]=o.$targets.length-1)}function r(t){var e=o.$targets.$active;return-1!==e.indexOf(t)}function n(t){var e=o.$targets.$active.indexOf(t);-1!==e&&(o.$targets[o.$targets.$active[e]].attr('aria-hidden','true'),o.$toggles[o.$targets.$active[e]].attr('aria-expanded','false'),o.$targets.$active.splice(e,1))}function l(t){o.$options.allowMultiple||(void 0!==o.$targets[o.$targets.$active[0]]&&o.$targets[o.$targets.$active[0]].attr('aria-hidden','true'),o.$toggles[o.$targets.$active[0]]&&o.$toggles[o.$targets.$active[0]].attr('aria-expanded','false'),o.$targets.$active.splice(0,1)),-1===o.$targets.$active.indexOf(t)&&(o.$targets.$active.push(t),void 0!==o.$targets[o.$targets.$active[o.$targets.$active.length-1]]&&o.$targets[o.$targets.$active[o.$targets.$active.length-1]].attr('aria-hidden','false'),void 0!==o.$toggles[o.$targets.$active[o.$targets.$active.length-1]]&&o.$toggles[o.$targets.$active[o.$targets.$active.length-1]].attr('aria-expanded','true'))}var o=this;o.$options=angular.copy(t),angular.forEach(['animation','disallowToggle','activeClass','startCollapsed','allowMultiple'],function(t){angular.isDefined(s[t])&&(o.$options[t]=s[t])});var g=/^(false|0|)$/i;angular.forEach(['disallowToggle','startCollapsed','allowMultiple'],function(t){angular.isDefined(s[t])&&g.test(s[t])&&(o.$options[t]=!1)}),o.$toggles=[],o.$targets=[],o.$viewChangeListeners=[],o.$registerToggle=function(t){o.$toggles.push(t),t.attr('aria-expanded','false')},o.$registerTarget=function(t){o.$targets.push(t);var e=0;if(o.$targets){for(e=0;e<o.$targets.length;e++)o.$targets[e].attr('aria-hidden','true');for(e=0;e<o.$targets.$active.length;e++)o.$targets[o.$targets.$active[e]]&&o.$targets[o.$targets.$active[e]].attr('aria-hidden','false'),o.$toggles[o.$targets.$active[e]]&&o.$toggles[o.$targets.$active[e]].attr('aria-expanded','true')}},o.$unregisterToggle=function(t){var e=o.$toggles.indexOf(t);o.$toggles.splice(e,1)},o.$unregisterTarget=function(t){var e=o.$targets.indexOf(t);o.$targets.splice(e,1),o.$options.allowMultiple&&n(t),i(e),o.$viewChangeListeners.forEach(function(t){t()})},o.$targets.$active=o.$options.startCollapsed?[]:[0],o.$setActive=e.$setActive=function(t){angular.isArray(t)?o.$targets.$active=t:!o.$options.disallowToggle&&r(t)?n(t):l(t),o.$viewChangeListeners.forEach(function(t){t()})},o.$activeIndexes=function(){return o.$options.allowMultiple?o.$targets.$active:1===o.$targets.$active.length?o.$targets.$active[0]:-1}};this.$get=function(){var a={};return a.defaults=t,a.controller=e,a}}).directive('bsCollapse',['$window','$animate','$collapse',function(t,e,a){return{require:['?ngModel','bsCollapse'],controller:['$scope','$element','$attrs',a.controller],link:function(t,e,a,s){var i=s[0],r=s[1];i&&(r.$viewChangeListeners.push(function(){i.$setViewValue(r.$activeIndexes())}),i.$formatters.push(function(t){if(angular.isArray(t))r.$setActive(t);else{var e=r.$activeIndexes();angular.isArray(e)?-1===e.indexOf(1*t)&&r.$setActive(1*t):e!==1*t&&r.$setActive(1*t)}return t}))}}}]).directive('bsCollapseToggle',function(){var t={ENTER:13,SPACE:32};return{require:['^?ngModel','^bsCollapse'],link:function(e,a,s,i){var r=i[1];a.attr('data-toggle','collapse'),r.$registerToggle(a),e.$on('$destroy',function(){r.$unregisterToggle(a)});var n=function(){if(!s.disabled){var t=s.bsCollapseToggle&&'bs-collapse-toggle'!==s.bsCollapseToggle?s.bsCollapseToggle:r.$toggles.indexOf(a);r.$setActive(1*t),e.$apply()}};a.on('click',n),a.bind('keydown keypress',function(e){(e.which===t.ENTER||e.which===t.SPACE)&&(console.log('key handler handling'),n(),e.preventDefault())})}}}).directive('bsCollapseTarget',['$animate',function(t){return{require:['^?ngModel','^bsCollapse'],link:function(e,a,s,i){function r(){var e=n.$targets.indexOf(a),s=n.$activeIndexes(),i='removeClass';angular.isArray(s)?-1!==s.indexOf(e)&&(i='addClass'):e===s&&(i='addClass'),t[i](a,n.$options.activeClass)}var n=i[1];a.addClass('collapse'),n.$options.animation&&a.addClass(n.$options.animation),n.$registerTarget(a),e.$on('$destroy',function(){n.$unregisterTarget(a)}),n.$viewChangeListeners.push(function(){r()}),r()}}}]);
//# sourceMappingURL=collapse.min.js.map
