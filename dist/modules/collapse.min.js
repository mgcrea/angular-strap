/**
 * angular-strap
 * @version v2.3.6 - 2015-11-14
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.collapse',[]).provider('$collapse',function(){var e=this.defaults={animation:'am-collapse',disallowToggle:!1,activeClass:'in',startCollapsed:!1,allowMultiple:!1},t=this.controller=function(t,a,s){function i(e){for(var t=r.$targets.$active,a=0;a<t.length;a++)e<t[a]&&(t[a]=t[a]-1),t[a]===r.$targets.length&&(t[a]=r.$targets.length-1)}function n(e){var t=r.$targets.$active;return-1===t.indexOf(e)?!1:!0}function l(e){var t=r.$targets.$active.indexOf(e);-1!==t&&r.$targets.$active.splice(t,1)}function o(e){r.$options.allowMultiple||r.$targets.$active.splice(0,1),-1===r.$targets.$active.indexOf(e)&&r.$targets.$active.push(e)}var r=this;r.$options=angular.copy(e),angular.forEach(['animation','disallowToggle','activeClass','startCollapsed','allowMultiple'],function(e){angular.isDefined(s[e])&&(r.$options[e]=s[e])});var g=/^(false|0|)$/i;angular.forEach(['disallowToggle','startCollapsed','allowMultiple'],function(e){angular.isDefined(s[e])&&g.test(s[e])&&(r.$options[e]=!1)}),r.$toggles=[],r.$targets=[],r.$viewChangeListeners=[],r.$registerToggle=function(e){r.$toggles.push(e)},r.$registerTarget=function(e){r.$targets.push(e)},r.$unregisterToggle=function(e){var t=r.$toggles.indexOf(e);r.$toggles.splice(t,1)},r.$unregisterTarget=function(e){var t=r.$targets.indexOf(e);r.$targets.splice(t,1),r.$options.allowMultiple&&l(e),i(t),r.$viewChangeListeners.forEach(function(e){e()})},r.$targets.$active=r.$options.startCollapsed?[]:[0],r.$setActive=t.$setActive=function(e){angular.isArray(e)?r.$targets.$active=e:r.$options.disallowToggle?o(e):n(e)?l(e):o(e),r.$viewChangeListeners.forEach(function(e){e()})},r.$activeIndexes=function(){return r.$options.allowMultiple?r.$targets.$active:1===r.$targets.$active.length?r.$targets.$active[0]:-1}};this.$get=function(){var a={};return a.defaults=e,a.controller=t,a}}).directive('bsCollapse',['$window','$animate','$collapse',function(e,t,a){a.defaults;return{require:['?ngModel','bsCollapse'],controller:['$scope','$element','$attrs',a.controller],link:function(e,t,a,s){var i=s[0],n=s[1];i&&(n.$viewChangeListeners.push(function(){i.$setViewValue(n.$activeIndexes())}),i.$formatters.push(function(e){if(angular.isArray(e))n.$setActive(e);else{var t=n.$activeIndexes();angular.isArray(t)?-1===t.indexOf(1*e)&&n.$setActive(1*e):t!==1*e&&n.$setActive(1*e)}return e}))}}}]).directive('bsCollapseToggle',function(){return{require:['^?ngModel','^bsCollapse'],link:function(e,t,a,s){var i=(s[0],s[1]);t.attr('data-toggle','collapse'),i.$registerToggle(t),e.$on('$destroy',function(){i.$unregisterToggle(t)}),t.on('click',function(){var s=a.bsCollapseToggle&&'bs-collapse-toggle'!==a.bsCollapseToggle?a.bsCollapseToggle:i.$toggles.indexOf(t);i.$setActive(1*s),e.$apply()})}}}).directive('bsCollapseTarget',['$animate',function(e){return{require:['^?ngModel','^bsCollapse'],link:function(t,a,s,i){function n(){var t=l.$targets.indexOf(a),s=l.$activeIndexes(),i='removeClass';angular.isArray(s)?-1!==s.indexOf(t)&&(i='addClass'):t===s&&(i='addClass'),e[i](a,l.$options.activeClass)}var l=(i[0],i[1]);a.addClass('collapse'),l.$options.animation&&a.addClass(l.$options.animation),l.$registerTarget(a),t.$on('$destroy',function(){l.$unregisterTarget(a)}),l.$viewChangeListeners.push(function(){n()}),n()}}}]);
//# sourceMappingURL=collapse.min.js.map
