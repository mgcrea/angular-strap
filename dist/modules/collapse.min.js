/**
 * angular-strap
 * @version v2.3.12 - 2017-03-30
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.collapse',[]).provider('$collapse',function(){var e=this.defaults={animation:'am-collapse',disallowToggle:!1,activeClass:'in',startCollapsed:!1,allowMultiple:!1},t=this.controller=function(t,a,i){function n(e){for(var t=r.$targets.$active,a=0;a<t.length;a++)e<t[a]&&(t[a]=t[a]-1),t[a]===r.$targets.length&&(t[a]=r.$targets.length-1)}function s(e){var t=r.$targets.$active;return-1!==t.indexOf(e)}function l(e){var t=r.$targets.$active.indexOf(e);-1!==t&&r.$targets.$active.splice(t,1)}function o(e){r.$options.allowMultiple||r.$targets.$active.splice(0,1),-1===r.$targets.$active.indexOf(e)&&r.$targets.$active.push(e)}var r=this;r.$options=angular.copy(e),angular.forEach(['animation','disallowToggle','activeClass','startCollapsed','allowMultiple'],function(e){angular.isDefined(i[e])&&(r.$options[e]=i[e])});var g=/^(false|0|)$/i;angular.forEach(['disallowToggle','startCollapsed','allowMultiple'],function(e){angular.isDefined(i[e])&&g.test(i[e])&&(r.$options[e]=!1)}),r.$toggles=[],r.$targets=[],r.$viewChangeListeners=[],r.$registerToggle=function(e){r.$toggles.push(e)},r.$registerTarget=function(e){r.$targets.push(e)},r.$unregisterToggle=function(e){var t=r.$toggles.indexOf(e);r.$toggles.splice(t,1)},r.$unregisterTarget=function(e){var t=r.$targets.indexOf(e);r.$targets.splice(t,1),r.$options.allowMultiple&&l(e),n(t),r.$viewChangeListeners.forEach(function(e){e()})},r.$targets.$active=r.$options.startCollapsed?[]:[0],r.$setActive=t.$setActive=function(e){angular.isArray(e)?r.$targets.$active=e:!r.$options.disallowToggle&&s(e)?l(e):o(e),r.$viewChangeListeners.forEach(function(e){e()})},r.$activeIndexes=function(){return r.$options.allowMultiple?r.$targets.$active:1===r.$targets.$active.length?r.$targets.$active[0]:-1}};this.$get=function(){var a={};return a.defaults=e,a.controller=t,a}}).directive('bsCollapse',['$window','$animate','$collapse',function(e,t,a){return{require:['?ngModel','bsCollapse'],controller:['$scope','$element','$attrs',a.controller],link:function(e,t,a,i){var n=i[0],s=i[1];n&&(s.$viewChangeListeners.push(function(){n.$setViewValue(s.$activeIndexes())}),n.$formatters.push(function(e){if(angular.isArray(e))s.$setActive(e);else{var t=s.$activeIndexes();angular.isArray(t)?-1===t.indexOf(1*e)&&s.$setActive(1*e):t!==1*e&&s.$setActive(1*e)}return e}))}}}]).directive('bsCollapseToggle',function(){return{require:['^?ngModel','^bsCollapse'],link:function(e,t,a,i){var n=i[1];t.attr('data-toggle','collapse'),n.$registerToggle(t),e.$on('$destroy',function(){n.$unregisterToggle(t)});var s=function(){if(!a.disabled){var i=a.bsCollapseToggle&&'bs-collapse-toggle'!==a.bsCollapseToggle?a.bsCollapseToggle:n.$toggles.indexOf(t);n.$setActive(1*i),e.$apply()}};t.on('click',s),t.bind('keydown keypress',function(e){13===e.which?(s(),e.preventDefault()):16!==e.which&&9!==e.which&&e.preventDefault()})}}}).directive('bsCollapseTarget',['$animate',function(e){return{require:['^?ngModel','^bsCollapse'],link:function(t,a,i,n){function s(){var t=l.$targets.indexOf(a),i=l.$activeIndexes(),n='removeClass';angular.isArray(i)?-1!==i.indexOf(t)&&(n='addClass'):t===i&&(n='addClass'),e[n](a,l.$options.activeClass)}var l=n[1];a.addClass('collapse'),l.$options.animation&&a.addClass(l.$options.animation),l.$registerTarget(a),t.$on('$destroy',function(){l.$unregisterTarget(a)}),l.$viewChangeListeners.push(function(){s()}),s()}}}]);
//# sourceMappingURL=collapse.min.js.map
