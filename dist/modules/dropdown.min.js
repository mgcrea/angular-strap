/**
 * angular-strap
 * @version v2.3.12 - 2021-12-03
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.dropdown',['mgcrea.ngStrap.tooltip']).provider('$dropdown',function(){var e=this.defaults={animation:'am-fade',prefixClass:'dropdown',prefixEvent:'dropdown',placement:'bottom-left',templateUrl:'dropdown/dropdown.tpl.html',trigger:'click',container:!1,keyboard:!0,html:!1,delay:0};this.$get=['$window','$rootScope','$tooltip','$timeout',function(t,n,o,r){function a(a,d){function c(e){if(e.target!==a[0])return e.target!==a[0]&&u.hide()}var u={},s=angular.extend({},e,d);u.$scope=s.scope&&s.scope.$new()||n.$new(),u=o(a,s);var p=a.parent();a&&a[0]&&'BUTTON'===a[0].tagName.toUpperCase()&&(a.attr('aria-haspopup','true'),a.attr('aria-expanded','false')),u.$onKeyDown=function(e){if(9===e.keyCode||27===e.keyCode)return void u.hide(/27/.test(e.keyCode));if(u.$element&&(38===e.keyCode||40===e.keyCode||32===e.keyCode||13===e.keyCode)){e.preventDefault(),e.stopPropagation();var t=angular.element(u.$element[0].querySelectorAll('li:not(.divider) a'));if(!t.length)return;var n;angular.forEach(t,function(e,t){i&&i.call(e,'.active')&&(n=t,angular.element(e).removeClass('active'))}),32===e.keyCode||13===e.keyCode?t.eq(n).click():38===e.keyCode&&n>0?n--:38!==e.keyCode||!angular.isUndefined(n)&&0!==n?40===e.keyCode&&n<t.length-1?n++:40===e.keyCode&&n===t.length-1?n=0:angular.isUndefined(n)&&(n=0):n=t.length-1,t.eq(n).addClass('active'),u.$element.attr('aria-activedescendant',t.eq(n).attr('id')),t.eq(n)[0].focus()}},u.$onFocusOut=function(e){for(var n=!1,o=angular.element(e.relatedTarget);void 0!==o&&o.length&&o[0]!==t.document.body;){if(o=o.parent(),void 0!==o&&o[0]===u.$element[0]){n=!0;break}n=!1}n?(e.preventDefault(),e.stopPropagation()):u.hide()};var f=u.show;u.show=function(){f(),r(function(){if(a.attr('aria-expanded','true'),u.$element&&(u.$element.attr('aria-activedescendant',''),u.$element.attr('role','menu'),u.$element.attr('tabindex','-1')),s.keyboard&&u.$element&&(u.$element.on('keydown',u.$onKeyDown),u.$element.on('focusout',u.$onFocusOut)),l.on('click',c),u.$element){var e=angular.element(u.$element[0].querySelectorAll('li:not(.divider)'));e.attr('role','none'),angular.element(u.$element[0].querySelectorAll('li.divider')).attr('role','seperator'),e=angular.element(u.$element[0].querySelectorAll('li:not(.divider) a')),e.attr('role','menuitem'),e.length&&s.keyboard&&angular.forEach(e,function(e,t){angular.element(e).attr('id',u.$scope.$id+'_menuitem_'+t),angular.element(e).attr('tabindex','-1')})}},0,!1),p.hasClass('dropdown')&&p.addClass('open')};var m=u.hide;u.hide=function(e){u.$isShown&&(a.attr('aria-expanded','false'),s.keyboard&&u.$element&&(u.$element.off('keydown',u.$onKeyDown),u.$element.off('focusout',u.$onFocusOut)),l.off('click',c),p.hasClass('dropdown')&&p.removeClass('open'),r(function(){m(),e&&r(function(){a&&a[0]&&a[0].focus()},0,!1)},200))};var g=u.destroy;return u.destroy=function(){l.off('click',c),g()},u}var l=angular.element(t.document.body),i=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;return a}]}).directive('bsDropdown',['$window','$sce','$dropdown',function(e,t,n){return{restrict:'EAC',scope:!0,compile:function(e,t){if(!t.bsDropdown){for(var o=e[0].nextSibling;o&&1!==o.nodeType;)o=o.nextSibling;o&&o.className.split(' ').indexOf('dropdown-menu')>=0&&(t.template=o.outerHTML,t.templateUrl=void 0,o.parentNode.removeChild(o))}return function(e,o,r){var a={scope:e};angular.forEach(['template','templateUrl','controller','controllerAs','placement','container','delay','trigger','keyboard','html','animation','id','autoClose'],function(e){angular.isDefined(t[e])&&(a[e]=t[e])});var l=/^(false|0|)$/i;angular.forEach(['html','container'],function(e){angular.isDefined(r[e])&&l.test(r[e])&&(a[e]=!1)}),angular.forEach(['onBeforeShow','onShow','onBeforeHide','onHide'],function(t){var n='bs'+t.charAt(0).toUpperCase()+t.slice(1);angular.isDefined(r[n])&&(a[t]=e.$eval(r[n]))}),r.bsDropdown&&e.$watch(r.bsDropdown,function(t,n){e.content=t},!0);var i=n(o,a);o.on('keydown',function(e){38!==e.keyCode&&40!==e.keyCode&&27!==e.keyCode&&9!==e.keyCode||i.$onKeyDown(e)}),r.bsShow&&e.$watch(r.bsShow,function(e,t){i&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(dropdown),?/i)),e===!0?i.show():i.hide())}),e.$on('$destroy',function(){i&&i.destroy(),a=null,i=null})}}}}]);
//# sourceMappingURL=dropdown.min.js.map
